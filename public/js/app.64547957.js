(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],u=0,p=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={app:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},"3c61":function(e,t,r){},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=n,e.exports=s,s.id="4678"},"46db":function(e,t,r){e.exports=r.p+"img/wave.d978366f.svg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app",class:e.isHomePageClass,style:{backgroundColor:this.backgroundColor,backgroundImage:this.backgroundImg}},[e.isHome?e._e():r("app-header",{on:{addBoard:e.addBoard,setBackground:e.setBackground}}),r("router-view",{staticClass:"main",attrs:{loggedinUser:e.loggedinUser,darkWindow:e.darkWindow},on:{setBackground:e.setBackground,setToPreviewEdit:e.setDarkWindow,setDarkWindow:e.setDarkWindow}}),r("user-msg"),e.isDarkWindow?r("div",{staticClass:"darkWindow",on:{click:e.closeDarkWindow}}):e._e()],1)},n=[],o=r("1da1"),i=(r("caad"),r("2532"),r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"app-header",class:e.classBoardsPage},[r("nav",{staticClass:"nav"},[r("div",{staticClass:"wh"},[r("div",{staticClass:"btn-container",on:{click:e.goToBoardsPage}},[r("span",{staticClass:"material-icons-outlined"},[e._v("home")])])]),r("button",{staticClass:"btn-container",on:{click:function(t){return t.stopPropagation(),e.toggleBoardList.apply(null,arguments)}}},[r("span",{staticClass:"material-icons-outlined boards-icon"},[e._v("space_dashboard")]),r("span",[e._v(" Boards")])])]),e.isBoardListOpen?r("board-list",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hideBoardList,expression:"hideBoardList"}],attrs:{boards:e.boards},on:{closeBoardList:function(t){e.isBoardListOpen=!1},setBackground:e.setBackground}}):e._e(),r("div",{staticClass:"logo",on:{click:e.goToHomePage}},[r("span",{staticClass:"material-icons-outlined logo-icon"},[e._v("space_dashboard")]),r("span",[e._v("Trio")])]),r("div",{staticClass:"header-features"},[r("button",{staticClass:"material-icons-outlined btn-container",on:{click:e.toggleBoardCompose}},[e._v(" add ")]),r("div",{staticClass:"avatar",on:{click:function(t){t.stopPropagation(),e.isUserMenuOpen=!0}}},[r("avatar",{attrs:{size:32,username:e.user.fullname,src:e.user.imgUrl,color:"#172b4e",backgroundColor:"#DFE1E6",customStyle:{fontSize:"14px"}}}),e.isUserMenuOpen?r("user-menu",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hideUserMenu,expression:"hideUserMenu"}],staticClass:"popup",attrs:{user:e.user},on:{logout:e.logout,close:function(t){e.isUserMenuOpen=!1}}}):e._e()],1)]),e.isBoardComposeOn?r("board-compose",{on:{closeCompose:e.toggleBoardCompose,addBoard:e.addBoard}}):e._e()],1)}),c=[],l=r("4a89"),d=r.n(l),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"board-compose-container",on:{click:e.closeCompose}},[r("div",{staticClass:"board-compose"},[r("div",{staticClass:"board-compose-preview",style:{backgroundColor:e.selectColor,backgroundImage:"url("+e.selectImg+")"}},[r("span",{staticClass:"close material-icons-outlined close-compose",on:{click:e.close}},[e._v("close")]),r("el-input",{attrs:{placeholder:"Add board title"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createBoard.apply(null,arguments)}},model:{value:e.board.title,callback:function(t){e.$set(e.board,"title",t)},expression:"board.title"}}),r("el-button",{staticClass:"compose-btn",attrs:{type:"primary",disabled:!e.board.title},on:{click:e.createBoard}},[e._v("Create board")]),r("el-button",{staticClass:"compose-btn change-colors",attrs:{type:"primary"},on:{click:e.renderColors}},[e._v("Change Colors")])],1),r("section",{staticClass:"backgrounds"},[r("div",{staticClass:"board-compose-imgs"},e._l(e.imgs,(function(t,a){return r("span",{key:a,style:{backgroundImage:"url("+t+")"},on:{click:function(r){return e.setimg(t)}}})})),0),r("div",{staticClass:"board-compose-bgcs"},e._l(e.colors,(function(t,a){return r("span",{key:a,style:{backgroundColor:t},on:{click:function(r){return e.setBcg(t)}}})})),0)])])])},p=[],m=(r("c740"),r("a434"),r("7db0"),r("99af"),r("bc3a")),h=r.n(m),g=r("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"homepage"},[a("img",{staticClass:"wave",attrs:{src:r("46db"),alt:""}}),a("section",{staticClass:"header-waves"},[e._m(0),a("nav",{staticClass:"homepage-nav"},[a("router-link",{staticClass:"login",attrs:{to:"/login"}},[e._v("Log in")]),a("span",[e._v(" | ")]),a("router-link",{staticClass:"signup",attrs:{to:"/signup"}},[e._v("Sign up")])],1)]),a("div",{staticClass:"layout"},[a("main",{staticClass:"main-home-page"},[a("section",{staticClass:"started"},[a("p",{staticClass:"txt-title"},[e._v(" Manage your projects with your team/friends easily and efficiently. ")]),a("button",{staticClass:"start-btn",on:{click:e.signupAndStart}},[e._v("Get Started")])]),a("lottie-player",{staticStyle:{"max-width":"700px"},attrs:{autoplay:"",loop:"",mode:"normal",src:"https://assets8.lottiefiles.com/packages/lf20_ca8zbrdk.json"}})],1)])])},v=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logo"},[r("span",{staticClass:"material-icons-outlined logo-icon"},[e._v("space_dashboard")]),e._v("Trio ")])}],b=(r("a717"),{name:"Home",components:{},created:function(){},methods:{signupAndStart:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"signupAsGuest"});case 2:e.$store.getters.boards.length>0?e.$router.push("/b/".concat(e.$store.getters.boards[0]._id)):e.$router.push("/b");case 3:case"end":return t.stop()}}),t)})))()}}}),C=b,k=r("2877"),y=Object(k["a"])(C,f,v,!1,null,null,null),w=y.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.board?r("div",{staticClass:"board-wrapper app-main"},[r("board-header",{attrs:{board:e.board},on:{updateTitle:e.updateBoardTitle,toggleStar:e.toggleStar,updateMembers:e.updateMembers,setBackground:e.setBackground,openDashboard:function(t){e.isDashboardOpen=!0},openDeletePopup:e.openDeletePopup}}),r("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll:nochilddrag",arg:"nochilddrag"}],staticClass:"board-canvas my-scrollbar"},[r("draggable",{ref:"group",attrs:{"ghost-class":"ghost-card","data-dragscroll":"",list:e.board.groups,animation:200,group:"groups"},on:{end:e.updateBoardAfterDrag}},e._l(e.board.groups,(function(t){return r("group-list",{key:t.id,attrs:{group:t,board:e.board,darkWindow:e.darkWindow,isCardPreviewLabelsShown:e.isCardPreviewLabelsShown,loggedinUser:e.loggedinUser},on:{socketUpdateBoard:e.socketUpdateBoard,updateBoardAfterDrag:e.updateBoardAfterDrag,removeGroup:e.removeGroup,updateCard:e.updateCard,updateGroup:e.updateGroup,toggleLabelsTitles:e.toggleLabelsTitles,setToPreviewEdit:e.setToPreviewEdit}})})),1),r("group-compose",{attrs:{boardId:e.boardId,isBoardEmpty:e.isBoardEmpty},on:{socketUpdateBoard:e.socketUpdateBoard}})],1),r("router-view",{attrs:{loggedinUser:e.loggedinUser},on:{socketUpdateBoard:e.socketUpdateBoard}}),e.isDashboardOpen?r("dashboard",{attrs:{board:e.board},on:{closeDashboard:function(t){e.isDashboardOpen=!1}}}):e._e(),e.isRemovePopupOpen&&e.darkWindow?r("delete-popup",{on:{close:function(t){e.isRemovePopupOpen=!1},removeBoard:e.removeBoard,setDarkWindow:e.setDarkWindow}}):e._e()],1):e._e()},x=[],B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"group-list"},[r("div",{staticClass:"group-header"},[e.isTitleEdit?r("contenteditable",{ref:"titleGroup",staticClass:"group-title",attrs:{noHTML:!0,contenteditable:!0,tag:"h2",noNL:!1,type:"text"},on:{input:e.updateTitleDebounce,blur:e.close,focus:function(e){return this.select()}},model:{value:e.group.title,callback:function(t){e.$set(e.group,"title",t)},expression:"group.title"}}):r("div",{staticClass:"group-title-preview",on:{click:function(t){return e.showTitleInput()}}},[e._v(" "+e._s(e.group.title)+" ")])],1),r("span",{staticClass:"material-icons group-extras-menu",on:{click:function(t){return t.stopPropagation(),e.toggleGroupMenu.apply(null,arguments)}}},[e._v(" more_horiz ")]),e.showGroupMenu?r("group-menu",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hidePopup,expression:"hidePopup"}],staticClass:"popup group-menu",attrs:{group:e.group},on:{closeGroupMenu:function(t){e.showGroupMenu=!1},removeGroup:e.removeGroup,addCard:e.addCard}}):e._e(),r("div",{staticClass:"card-preview-list"},[r("draggable",{attrs:{list:e.group.cards,animation:350,"ghost-class":"ghost-card",group:"cards"},on:{end:e.updateBoardAfterDrag}},e._l(e.group.cards,(function(t){return r("card-preview",{key:t.id,ref:"cardPreview",refInFor:!0,attrs:{card:t,groupId:e.group.id,darkWindow:e.darkWindow,isLabelsTitlesShown:e.isCardPreviewLabelsShown,loggedinUser:e.loggedinUser},on:{socketUpdateBoard:e.socketUpdateBoard,toggleLabelsTitles:e.toggleLabelsTitles,updateCard:e.updateCard,setToPreviewEdit:e.setToPreviewEdit}})})),1)],1),r("card-compose",{ref:"cardCompose",attrs:{groupId:e.group.id,isAddCard:e.isAddCard,boardId:e.board._id},on:{closeAddCard:function(t){e.isAddCard=!1},socketUpdateBoard:e.socketUpdateBoard}})],1)},E=[],I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card-preview",on:{click:e.toCardDetails}},["half"===e.card.cover.type?r("div",{staticClass:"cover-half",style:{backgroundColor:e.card.cover.color}},[r("button",{staticClass:"edit-btn",class:{"is-cover":e.card.cover.color},on:{click:function(t){return t.stopPropagation(),e.setToPreviewEdit(t,e.card,!0)}}},[r("span",{staticClass:"material-icons-outlined icon"},[e._v("edit")])])]):e._e(),"full"===e.card.cover.type?r("div",{staticClass:"cover-full",style:{backgroundColor:e.card.cover.color}},[r("button",{staticClass:"edit-btn",class:{"is-cover":e.card.cover.color},on:{click:function(t){return t.stopPropagation(),e.setToPreviewEdit(t,e.card,!0)}}},[r("span",{staticClass:"material-icons-outlined icon"},[e._v("edit")])]),r("span",{staticClass:"card-preview-title"},[e._v(e._s(e.card.title))])]):e._e(),"full"!==e.card.cover.type?r("section",{staticClass:"main-preview"},["half"!==e.card.cover.type?r("button",{staticClass:"edit-btn",class:{"is-cover":e.card.cover.color,"is-img-no-cover":e.card.attachments.length>=1&&!e.card.cover.color},on:{click:function(t){return t.stopPropagation(),e.setToPreviewEdit(t,e.card,!0)}}},[r("span",{staticClass:"material-icons-outlined icon"},[e._v("edit")])]):e._e(),e.card.attachments.length?r("img",{staticClass:"img-preview",attrs:{src:e.card.attachments[0].url}}):e._e(),e.cardLabels.length&&!e.isLabelsTitlesShown?r("div",{staticClass:"card-labels"},e._l(e.cardLabels,(function(t){return r("span",{key:t.id,staticClass:"label-preview",style:{backgroundColor:t.color},on:{click:function(t){return t.stopPropagation(),e.toggleLabelTitle.apply(null,arguments)}}})})),0):e._e(),e.cardLabels.length&&e.isLabelsTitlesShown?r("div",{staticClass:"card-labels"},e._l(e.cardLabels,(function(t){return r("span",{key:t.id,staticClass:"label-preview title-shown",style:{backgroundColor:t.color},on:{click:function(t){return t.stopPropagation(),e.toggleLabelTitle.apply(null,arguments)}}},[e._v(e._s(t.title))])})),0):e._e(),r("span",{staticClass:"card-preview-title"},[e._v(e._s(e.card.title))]),r("div",{staticClass:"card-info"},[r("div",{staticClass:"card-badges"},[e.userNotifications?r("div",{staticClass:"notifications-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v("notifications")]),r("span",[e._v(e._s(e.userNotifications))])]):e._e(),Object.keys(e.card.dueDate).length?r("div",{staticClass:"date-badge",class:{done:e.isCardDone},on:{mouseover:function(t){e.dueDateHovered=!0},mouseleave:function(t){e.dueDateHovered=!1}}},[e.dueDateHovered&&e.isCardDone?r("span",{staticClass:"material-icons-outlined badge-icon",on:{click:function(t){return t.stopPropagation(),e.toggleDueDateIsDone.apply(null,arguments)}}},[e._v("check_box")]):e.dueDateHovered&&!e.isCardDone?r("span",{staticClass:"material-icons-outlined badge-icon",on:{click:function(t){return t.stopPropagation(),e.toggleDueDateIsDone.apply(null,arguments)}}},[e._v("check_box_outline_blank")]):r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v("schedule")]),r("span",[e._v(" "+e._s(e._f("moment")(e.card.dueDate.time," MMM D"))+" ")])]):e._e(),e.card.description?r("div",{staticClass:"description-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v("subject")])]):e._e(),e.card.comments.length?r("div",{staticClass:"comment-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v(" mode_comment ")]),r("span",[e._v(e._s(e.card.comments.length))])]):e._e(),e.card.attachments.length?r("div",{staticClass:"attachments-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v(" attachments ")]),r("span",[e._v(e._s(e.card.attachments.length))])]):e._e(),e.cardChecklistsTodos.length?r("div",{staticClass:"checklist-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v(e._s(e.todosIcon))]),r("span",[r("span",[e._v(e._s(e.checklistsDoneTodos))]),r("span",[e._v("/")]),r("span",[e._v(e._s(e.cardChecklistsTodos.length))])])]):e._e()]),e.card.members.length?r("ul",{staticClass:"card-members"},e._l(e.card.members,(function(e){return r("avatar",{key:e.id,staticClass:"hover-background",attrs:{username:e.fullname,src:e.imgUrl,size:28,color:"#172b4e",backgroundColor:"#dfe1e6"}})})),1):e._e()])]):e._e(),e.cardEdit===e.cardToEdit&&e.isEdit?r("card-preview-edit",{attrs:{card:e.cardToEdit,groupId:e.groupId,isLabelsTitlesShown:e.isLabelsTitlesShown},on:{socketUpdateBoard:e.socketUpdateBoard,closeEdit:function(t){return e.setToPreviewEdit(null,!1)}}}):e._e()],1)},O=[],T=(r("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-preview-edit",on:{click:function(e){e.stopPropagation()}}},[r("div",[e.cardToEdit.cover.color?r("div",{staticClass:"cover",style:{backgroundColor:e.cardToEdit.cover.color}}):e._e(),e.cardLabels.length&&!e.isLabelsTitlesShown?r("div",{staticClass:"card-labels",class:e.isNoCover},e._l(e.cardLabels,(function(t){return r("span",{key:t.id,staticClass:"label-preview",style:{backgroundColor:t.color},on:{click:function(t){return t.stopPropagation(),e.toggleLabelTitle.apply(null,arguments)}}})})),0):e.cardLabels.length&&e.isLabelsTitlesShown?r("div",{staticClass:"card-labels",class:e.isNoCover},e._l(e.cardLabels,(function(t){return r("span",{key:t.id,staticClass:"label-preview title-shown",style:{backgroundColor:t.color},on:{click:function(t){return t.stopPropagation(),e.toggleLabelTitle.apply(null,arguments)}}},[e._v(e._s(t.title))])})),0):e._e(),r("contenteditable",{ref:"textareaTitle",staticClass:"main-textarea",class:e.isNoLabelAndCover,attrs:{tag:"div",contenteditable:!0,noNL:!1,noHTML:!0},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveCard.apply(null,arguments)}},model:{value:e.cardToEdit.title,callback:function(t){e.$set(e.cardToEdit,"title",t)},expression:"cardToEdit.title"}}),r("div",{staticClass:"info"},[r("div",{staticClass:"card-badges"},[Object.keys(e.cardToEdit.dueDate).length?r("div",{staticClass:"date-badge",class:{done:e.isCardDone},on:{mouseover:function(t){e.dueDateHovered=!0},mouseleave:function(t){e.dueDateHovered=!1}}},[e.dueDateHovered&&e.isCardDone?r("span",{staticClass:"material-icons-outlined badge-icon",on:{click:function(t){return t.stopPropagation(),e.toggleDueDateIsDone.apply(null,arguments)}}},[e._v("check_box")]):e.dueDateHovered&&!e.isCardDone?r("span",{staticClass:"material-icons-outlined badge-icon",on:{click:function(t){return t.stopPropagation(),e.toggleDueDateIsDone.apply(null,arguments)}}},[e._v("check_box_outline_blank")]):r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v("schedule")]),r("span",[e._v(" "+e._s(e._f("moment")(e.cardToEdit.dueDate.time," MMM D"))+" ")])]):e._e(),e.cardToEdit.description?r("div",{staticClass:"description-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v("subject")])]):e._e(),e.cardToEdit.comments.length?r("div",{staticClass:"comment-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v(" mode_comment ")]),r("span",[e._v(e._s(e.cardToEdit.comments.length))])]):e._e(),e.card.attachments.length?r("div",{staticClass:"attachments-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v(" attachments ")]),r("span",[e._v(e._s(e.card.attachments.length))])]):e._e(),e.cardChecklistsTodos.length?r("div",{staticClass:"checklist-badge"},[r("span",{staticClass:"material-icons-outlined badge-icon"},[e._v(e._s(e.todosIcon))]),r("span",[r("span",[e._v(e._s(e.checklistsDoneTodos))]),r("span",[e._v("/")]),r("span",[e._v(e._s(e.cardChecklistsTodos.length))])])]):e._e(),e.cardToEdit.members.length?r("ul",{staticClass:"card-members"},e._l(e.cardToEdit.members,(function(e){return r("avatar",{key:e.id,staticClass:"hover-background",attrs:{username:e.fullname,src:e.imgUrl,size:28,backgroundColor:"#dfe1e6",color:"#172b4d"}})})),1):e._e()])]),r("el-button",{staticClass:"save compose-btn",attrs:{type:"primary",disabled:!e.cardToEdit.title},on:{click:function(t){return e.saveCard(!0)}}},[e._v("Save")])],1),r("nav",[r("button",{staticClass:"open-card",on:{click:e.openCard}},[r("span",{staticClass:"icon material-icons-outlined"},[e._v("credit_card")]),e._v(" Open card ")]),r("button",{staticClass:"open-card",on:{click:function(t){return e.setCurrAction(e.actions[1])}}},[r("span",{staticClass:"icon material-icons-outlined"},[e._v("label")]),e._v(" Edit labels ")]),r("button",{staticClass:"open-card",on:{click:function(t){return e.setCurrAction(e.actions[0])}}},[r("span",{staticClass:"icon material-icons-outlined"},[e._v("person_add")]),e._v(" Change members ")]),r("button",{staticClass:"open-card",on:{click:function(t){return e.setCurrAction(e.actions[3])}}},[r("span",{staticClass:"icon material-icons-outlined"},[e._v("wallpaper")]),e._v(" Change cover ")]),r("button",{staticClass:"open-card",on:{click:e.copyCard}},[r("span",{staticClass:"icon material-icons-outlined"},[e._v("copy")]),e._v(" Copy ")]),r("button",{staticClass:"open-card",on:{click:function(t){return e.setCurrAction(e.actions[2])}}},[r("span",{staticClass:"icon material-icons-outlined"},[e._v("watch_later")]),e._v(" Edit dates ")]),r("button",{staticClass:"open-card",on:{click:e.removeCard}},[r("span",{staticClass:"icon material-icons-outlined"},[e._v("delete")]),e._v(" Delete card ")])]),e.currAction?r(e.currAction.type,{tag:"component",staticClass:"popup popup-component",attrs:{card:e.cardToEdit,action:e.currAction},on:{close:e.closeEditPopup,updateCard:e.updateCard,click:function(e){e.stopPropagation()}}}):e._e()],1)}),j=[],R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"card-edit-header"},[r("span",[e._v(e._s(e.action.name))]),r("span",{staticClass:"close material-icons close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])]),r("div",{staticClass:"card-edit-main popup-layout-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterName,expression:"filterName"}],attrs:{type:"text",placeholder:"Search members"},domProps:{value:e.filterName},on:{input:function(t){t.target.composing||(e.filterName=t.target.value)}}}),r("ul",[r("h4",[e._v("BOARD MEMBERS")]),e._l(e.membersToDisplay,(function(t){return r("li",{key:t._id,staticClass:"card-member-preview",on:{click:function(r){return e.toggleUserAsCardMember(t)}}},[r("div",{staticClass:"member-name"},[r("avatar",{attrs:{size:32,username:t.fullname,src:t.imgUrl,color:"#172b4d",backgroundColor:"#dfe1e6"}}),r("span",[e._v(e._s(t.fullname)+" ("+e._s(t.username)+")")])],1),t.isCardMember?r("span",{staticClass:"material-icons-outlined check-member-icon"},[e._v("check")]):e._e()])}))],2)])])},D=[],$=(r("d81d"),r("4d63"),r("ac1f"),r("25f0"),r("4de4"),new a["default"]),M={components:{avatar:d.a},props:{action:{type:Object,required:!0},card:{type:Object,required:!0}},data:function(){return{cardToEdit:null,CardMembers:null,filterName:""}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"loadUsers"});case 3:e.cardToEdit=JSON.parse(JSON.stringify(e.card)),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("Error loading users:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},computed:{users:function(){return this.$store.getters.users},cardMembers:function(){return this.card.members},boardMembers:function(){return this.$store.getters.currBoard.members},membersToDisplay:function(){var e=this,t=this.boardMembers;if(t.map((function(e){e.isCardMember=!1})),t.map((function(t){e.card.members.forEach((function(e){e._id===t._id&&(t.isCardMember=!0)}))})),!this.filterName)return t;var r=new RegExp(this.filterName,"i");return t.filter((function(e){return r.test(e.username)||r.test(e.fullname)}))}},methods:{toggleUserAsCardMember:function(e){var t="",r=this.$store.getters.loggedinUser,a=this.cardToEdit.members.findIndex((function(t){return t._id===e._id}));if(-1===a){var s={username:e.username,fullname:e.fullname,_id:e._id,imgUrl:e.imgUrl};this.cardToEdit.members.push(s),e.isCardMember=!0,t=e._id===r._id?"joined ".concat(this.card.title):"added ".concat(s.fullname," to ").concat(this.card.title)}else t=e._id===r._id?"left ".concat(this.card.title):"removed ".concat(this.cardToEdit.members[a].fullname," from ").concat(this.card.title),this.cardToEdit.members.splice(a,1),e.isCardMember=!1;var n={txt:t,card:{id:this.cardToEdit.id,title:this.cardToEdit.title}};this.updateCard(this.cardToEdit),$.$emit("addActivity",n)},updateCard:function(){this.$emit("updateCard",this.cardToEdit,!0)},close:function(){this.$emit("close")}}},U=M,L=Object(k["a"])(U,R,D,!1,null,null,null),S=L.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.labelToEdit?r("section",[r("div",{staticClass:"card-edit-header"},[r("span",[e._v("Change label")]),r("span",{staticClass:"material-icons-outlined back",on:{click:function(t){return t.stopPropagation(),e.back.apply(null,arguments)}}},[e._v(" arrow_back_ios ")]),r("span",{staticClass:"close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("X")])]),r("div",{staticClass:"card-edit-main"},[r("h4",[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.labelToEdit.title,expression:"labelToEdit.title"}],attrs:{type:"text"},domProps:{value:e.labelToEdit.title},on:{input:function(t){t.target.composing||e.$set(e.labelToEdit,"title",t.target.value)}}}),r("h4",[e._v("Select a color")]),r("ul",{staticClass:"popup-list-layout-2"},[e._l(e.colorsForNewLabel,(function(t){return r("li",{key:t,staticClass:"edit-label-color-preview",style:{backgroundColor:t},on:{click:function(r){return e.setLabelColor(t)}}},[t===e.labelToEdit.color?r("span",{staticClass:"material-icons-outlined checked-color-icon"},[e._v("check")]):e._e()])})),r("div",{staticClass:"edit-labels-no-color-section"},[r("li",{staticClass:"edit-label-color-preview no-color",style:{backgroundColor:"#b3bac5"},on:{click:function(t){return e.setLabelColor("#b3bac5")}}},["#b3bac5"===e.labelToEdit.color?r("span",{staticClass:"material-icons-outlined checked-color-icon"},[e._v("check")]):e._e()]),r("p",[e._v("No color.")]),r("p",[e._v("This won't show up on the front of cards.")])])],2),r("div",{staticClass:"edit-btns"},[r("el-button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:e.saveLabel}},[e._v("Save")]),r("el-button",{staticClass:"remove-btn",attrs:{type:"danger"},on:{click:e.removeLabel}},[e._v("Delete")])],1)])]):r("section",[r("div",{staticClass:"card-edit-header"},[r("span",[e._v(e._s(e.action.name))]),r("span",{staticClass:"close material-icons close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])]),r("div",{staticClass:"card-edit-main"},[r("ul",{staticClass:"popup-list-layout-1"},[r("h4",[e._v("LABELS")]),e._l(e.currBoard.labels,(function(t){return r("li",{key:t.id,staticClass:"card-label-preview",on:{click:function(r){return e.toggleLabelOnCard(t)}}},[r("span",{style:{backgroundColor:t.color}},[e._v(e._s(t.title))]),r("span",{staticClass:"material-icons-outlined icon",on:{click:function(r){return r.stopPropagation(),e.setLabelToEdit(t)}}},[e._v("edit")])])}))],2),r("div",[r("button",{staticClass:"popup-btn-1",on:{click:function(t){return t.stopPropagation(),e.setLabelToEdit(e.emptyLabel)}}},[e._v(" Create a new label ")])])])])},P=[],N={props:{action:{type:Object,required:!0},card:{type:Object,required:!0}},data:function(){return{filterBy:"",boardToEdit:null,cardToEdit:null,labelToEdit:null,colorsForNewLabel:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#0079bf","#00c2e0","#51e898","#ff78cb","#344563"],emptyLabel:{color:"#61bd4f",title:null,id:null}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.cardToEdit=JSON.parse(JSON.stringify(e.card));case 1:case"end":return t.stop()}}),t)})))()},watch:{currBoard:{immediate:!0,handler:function(){this.boardToEdit=JSON.parse(JSON.stringify(this.currBoard))}}},computed:{currBoard:function(){return this.$store.getters.currBoard}},methods:{setLabelColor:function(e){this.labelToEdit.color=e},toggleLabelOnCard:function(e){var t=this.cardToEdit.labelIds.findIndex((function(t){return t===e.id}));-1===t?this.cardToEdit.labelIds.push(e.id):(this.cardToEdit.labelIds.splice(t,1),this.updateCard()),this.updateCard(this.cardToEdit)},updateCard:function(){this.$emit("updateCard",this.cardToEdit,!0)},close:function(){this.$emit("close")},back:function(){this.labelToEdit=null},saveLabel:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.labelToEdit.id){t.next=10;break}return r=e.boardToEdit.labels.findIndex((function(t){return t.id===e.labelToEdit.id})),e.boardToEdit.labels.splice(r,1,e.labelToEdit),t.next=6,e.$store.dispatch({type:"saveBoard",board:e.boardToEdit});case 6:e.labelToEdit=null,e.emptyLabel={color:"",id:"",title:""},t.next=16;break;case 10:return e.labelToEdit.id=Date.now()%1e3+"",e.boardToEdit.labels.push(e.labelToEdit),t.next=14,e.$store.dispatch({type:"saveBoard",board:e.boardToEdit});case 14:e.labelToEdit=null,e.emptyLabel={color:"",id:"",title:""};case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0),console.log("Error saving label to board:",t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))()},removeLabel:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.labelToEdit.id){t.next=7;break}return r=e.boardToEdit.labels.findIndex((function(t){return t.id===e.labelToEdit.id})),e.boardToEdit.labels.splice(r,1),t.next=6,e.$store.dispatch({type:"saveBoard",board:e.boardToEdit});case 6:e.labelToEdit=null;case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log("Error saving label to board:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},setLabelToEdit:function(e){this.labelToEdit=e}}},F=N,G=Object(k["a"])(F,A,P,!1,null,null,null),H=G.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-dates-edit"},[r("div",{staticClass:"title"},[r("span",[e._v(e._s(e.action.name))]),r("span",{staticClass:"close material-icons close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])]),r("main",[r("date-picker",{attrs:{inline:!0,"default-value":new Date,valueType:"format"},model:{value:e.cardToEdit.dueDate.time,callback:function(t){e.$set(e.cardToEdit.dueDate,"time",t)},expression:"cardToEdit.dueDate.time"}}),r("el-button",{staticClass:"save",attrs:{type:"primary",disabled:!e.cardToEdit.dueDate.time},on:{click:e.updateCard}},[e._v("Save")])],1)])},z=[],W=r("ec45"),J=(r("411c"),{props:{action:{type:Object,required:!0},card:{type:Object,required:!0}},data:function(){return{cardToEdit:null}},components:{DatePicker:W["a"]},created:function(){this.cardToEdit=JSON.parse(JSON.stringify(this.card))},methods:{updateCard:function(){this.cardToEdit.dueDate.isDone=!1;var e={txt:"set ".concat(this.card.title," to be due ").concat(this.cardToEdit.dueDate.time),card:{id:this.card.id,title:this.card.title}};this.$emit("updateCard",this.cardToEdit,!0),$.$emit("addActivity",e),this.close()},close:function(){this.$emit("close")}}}),Y=J,K=Object(k["a"])(Y,q,z,!1,null,null,null),Z=K.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-cover-edit"},[r("div",[r("span",[e._v(e._s(e.action.name))]),r("span",{staticClass:"close material-icons close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])]),r("main",[r("section",{staticClass:"size"},[r("h4",{staticClass:"title"},[e._v("SIZE")]),r("section",{staticClass:"boards"},[r("button",{ref:"halfBtn",class:e.outlineHalfButtonClass,on:{click:function(t){return e.setSize("half")}}},[r("div",{staticClass:"board-half"},[r("div",{staticClass:"bgc",style:{backgroundColor:e.getBgc}}),r("div",{staticClass:"lines"},[r("div",{staticClass:"line line1",style:{backgroundColor:e.getColor}}),r("div",{staticClass:"line line2",style:{backgroundColor:e.getColor}}),r("div",{staticClass:"line line3",style:{backgroundColor:e.getColor}}),r("div",{staticClass:"line line4",style:{backgroundColor:e.getColor}})]),r("div",{staticClass:"circle",style:{backgroundColor:e.getColor}})])]),r("button",{ref:"fullBtn",class:e.outlineFullButtonClass,on:{click:function(t){return e.setSize("full")}}},[r("div",{staticClass:"board-full",style:{backgroundColor:e.getBgc}},[r("div",{staticClass:"lines"},[r("div",{staticClass:"line line1",style:{backgroundColor:e.getColorForFull}}),r("div",{staticClass:"line line2",style:{backgroundColor:e.getColorForFull}})])])])])]),this.cardToEdit.cover.color?r("button",{staticClass:"remove-cover",on:{click:e.removeCover}},[e._v("Remove cover")]):e._e(),r("section",{staticClass:"colors-container"},[r("h4",{staticClass:"title"},[e._v("COLORS")]),r("section",{staticClass:"colors"},e._l(e.colors,(function(t,a){return r("button",{key:a,staticClass:"color",style:{backgroundColor:t},on:{click:function(r){return r.stopPropagation(),e.setColor(t)}}})})),0)])])])},Q=[],X={props:{action:{type:Object,required:!0},card:{type:Object,required:!0}},data:function(){return{cardToEdit:JSON.parse(JSON.stringify(this.card)),colors:["#7BC86C","#F5DD29","#FFAF3F","#EF7564","#CD8DE5","#5BA4CF","#29CCE5","#6DECA9","#FF8ED4","#9e9e9e"],isRemove:!1}},created:function(){this.cardToEdit=JSON.parse(JSON.stringify(this.card))},methods:{updateCard:function(){this.$emit("updateCard",this.cardToEdit,!0)},close:function(){this.$emit("close")},setColor:function(e){this.cardToEdit.cover.color=e,this.cardToEdit.cover.type||(this.cardToEdit.cover.type="half"),this.updateCard()},setSize:function(e){(this.cardToEdit.cover.color||this.isRemove)&&(this.cardToEdit.cover.type=e,this.updateCard())},removeCover:function(){this.isRemove=!0,this.setColor(""),this.setSize(""),this.$refs.halfBtn.classList.remove("out-line"),this.$refs.fullBtn.classList.remove("out-line"),this.isRemove=!1}},computed:{getBgc:function(){return this.cardToEdit.cover.color?this.cardToEdit.cover.color:"#5e6c8454"},getColor:function(){return this.cardToEdit.cover.color?"gray":"#5e6c8454"},getColorForFull:function(){return this.cardToEdit.cover.color?"gray":"white"},outlineFullButtonClass:function(){return{"out-line":"full"===this.cardToEdit.cover.type}},outlineHalfButtonClass:function(){return{"out-line":"half"===this.cardToEdit.cover.type}}}},ee=X,te=Object(k["a"])(ee,V,Q,!1,null,null,null),re=te.exports,ae={props:{card:{type:Object,required:!0},groupId:{type:String,required:!0},isLabelsTitlesShown:{type:Boolean,required:!0}},components:{cardMembersEdit:S,cardLabelsEdit:H,cardDatesEdit:Z,cardCoverEdit:re,avatar:d.a},data:function(){return{cardToEdit:null,boardId:this.$route.params.boardId,cardChecklistsTodos:[],cardLabels:[],dueDateHovered:!1,isCardDone:!1,actions:[{type:"cardMembersEdit",icon:"person_add",name:"Members"},{type:"cardLabelsEdit",icon:"label",name:"Labels"},{type:"cardDatesEdit",icon:"watch_later",name:"Dates"},{type:"cardCoverEdit",icon:"wallpaper",name:"Cover"}],currAction:null}},created:function(){this.cardToEdit=JSON.parse(JSON.stringify(this.card))},watch:{"cardToEdit.labelIds":{deep:!0,handler:function(){this.filterCardLabels()}},"cardToEdit.checklists":{deep:!0,handler:function(){this.countCardTodos()}},"this.cardToEdit.dueDate.isDone":{handler:function(){this.isCardDone=this.cardToEdit.dueDate.isDone}}},methods:{saveCard:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"saveCard",card:t.cardToEdit,groupId:t.groupId,boardId:t.boardId});case 3:t.$emit("socketUpdateBoard"),e&&t.closeEdit(),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log("ERROR : cannot save card ",t.cardToEdit,",",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},closeEdit:function(){this.$emit("closeEdit")},openCard:function(){this.closeEdit(),this.$router.push("/b/".concat(this.boardId,"/g/").concat(this.groupId,"/c/").concat(this.card.id))},removeCard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.closeEdit(),r={},t.prev=2,t.next=5,e.$store.dispatch({type:"getGroupById",groupId:e.groupId,boardId:e.boardId});case 5:return a=t.sent,s={txt:"deleted ".concat(e.card.title," from ").concat(a.title),card:{id:e.card.id,title:e.card.title}},t.next=9,e.$store.dispatch({type:"removeCard",cardId:e.card.id,groupId:e.groupId,boardId:e.boardId});case 9:$.$emit("addActivity",s),e.$emit("socketUpdateBoard"),r={txt:"Card was successfully removed",type:"success"},t.next=18;break;case 14:throw t.prev=14,t.t0=t["catch"](2),r={txt:"Fail remove card, try again later",type:"error"},t.t0;case 18:return t.prev=18,t.next=21,e.$store.dispatch({type:"showMsg",msg:r});case 21:return t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[2,14,18,22]])})))()},copyCard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.closeEdit(),r={},t.prev=2,t.next=5,e.$store.dispatch({type:"copyCard",card:e.card,groupId:e.groupId,boardId:e.boardId});case 5:return t.next=7,e.$store.dispatch({type:"getGroupById",groupId:e.groupId,boardId:e.boardId});case 7:a=t.sent,s={txt:"copied ".concat(e.card.title," from ").concat(e.card.title," in list ").concat(a.title),card:{id:e.card.id,title:e.card.title}},$.$emit("addActivity",s),e.$emit("socketUpdateBoard"),r={txt:"Card was successfully copied",type:"success"},t.next=18;break;case 14:throw t.prev=14,t.t0=t["catch"](2),r={txt:"Fail copied card, try again later",type:"error"},t.t0;case 18:return t.prev=18,t.next=21,e.$store.dispatch({type:"showMsg",msg:r});case 21:return t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[2,14,18,22]])})))()},closeEditPopup:function(){this.currAction=null},setCurrAction:function(e){this.currAction=e},updateCard:function(e){this.cardToEdit=e,this.saveCard()},countCardTodos:function(){var e=this;this.checklistsDoneTodos=0,this.cardChecklistsTodos=[],this.cardToEdit.checklists.forEach((function(t){t.todos.forEach((function(t){t.isDone&&e.checklistsDoneTodos++,e.cardChecklistsTodos.push(t)}))}))},toggleDueDateIsDone:function(){this.cardToEdit.dueDate.isDone=!this.cardToEdit.dueDate.isDone,this.saveCard()},filterCardLabels:function(){var e=this;this.cardLabels=this.cardToEdit.labelIds.reduce((function(t,r){var a=e.currBoard.labels.find((function(e){return e.id===r}));return console.log("labels1",e.cardToEdit.labelIds),console.log("labels0",e.cardToEdit.labelIds),a?t.push(a):console.log("cardLabel undefined",a),t}),[])}},computed:{currBoard:function(){return this.$store.getters.currBoard},todosIcon:function(){return this.cardChecklistsTodos.length===this.checklistsDoneTodos&&this.checklistsDoneTodos?"check_box":"check_box_outline_blank"},isNoCover:function(){return{"no-cover":!this.cardToEdit.cover.color}},isNoLabelAndCover:function(){return{"no-label-and-cover":!this.cardToEdit.cover.color&&!this.cardToEdit.labelIds.length}}}},se=ae,ne=Object(k["a"])(se,T,j,!1,null,null,null),oe=ne.exports,ie={components:{avatar:d.a,CardPreviewEdit:oe},props:{card:{type:Object,required:!0},groupId:{type:String,required:!0},isLabelsTitlesShown:{type:Boolean,required:!0},darkWindow:{type:Object},loggedinUser:{type:Object}},data:function(){return{cardLabels:[],cardChecklistsTodos:[],checklistsDoneTodos:0,dueDateHovered:!1,isEdit:!1,cardToEdit:null,userNotifications:0}},watch:{"card.labelIds":{immediate:!0,deep:!0,handler:function(){this.filterCardLabels()}},"card.checklists":{immediate:!0,deep:!0,handler:function(){this.countCardTodos()}},"loggedinUser.mentions":{immediate:!0,deep:!0,handler:function(){this.countUserNotifications()}},"darkWindow.editCard":{handler:function(){this.isEdit=this.darkWindow.editCard}}},methods:{countUserNotifications:function(){var e=this;this.loggedinUser&&(this.userNotifications=this.loggedinUser.mentions.reduce((function(t,r){return r.cardId===e.card.id&&t++,t}),0))},toggleDueDateIsDone:function(){this.card.dueDate.isDone=!this.card.dueDate.isDone,this.$emit("updateCard",JSON.parse(JSON.stringify(this.card)))},countCardTodos:function(){var e=this;this.checklistsDoneTodos=0,this.cardChecklistsTodos=[],this.card.checklists.forEach((function(t){t.todos.forEach((function(t){t.isDone&&e.checklistsDoneTodos++,e.cardChecklistsTodos.push(t)}))}))},filterCardLabels:function(){var e=this;this.cardLabels=this.card.labelIds.reduce((function(t,r){var a=e.currBoard.labels.find((function(e){return e.id===r}));return a&&t.push(a),t}),[])},toCardDetails:function(){this.$router.push("".concat(this.$route.path,"/g/").concat(this.groupId,"/c/").concat(this.card.id))},toggleLabelTitle:function(){this.$emit("toggleLabelsTitles")},setToPreviewEdit:function(e,t,r){this.$emit("setToPreviewEdit","editCard",r),this.cardToEdit=t,this.$store.commit({type:"setCardEdit",card:t})},socketUpdateBoard:function(){this.$emit("socketUpdateBoard")}},computed:{cardEdit:function(){return this.$store.getters.cardEdit},currBoard:function(){return this.$store.getters.currBoard},todosIcon:function(){return this.cardChecklistsTodos.length===this.checklistsDoneTodos&&this.checklistsDoneTodos?"check_box":"check_box_outline_blank"},isCardDone:function(){return this.card.dueDate.isDone}}},ce=ie,le=Object(k["a"])(ce,I,O,!1,null,null,null),de=le.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isComposeOn?r("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hideCompose,expression:"hideCompose"}],staticClass:"card-compose"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cardToEdit.title,expression:"cardToEdit.title"}],ref:"textarea",attrs:{cols:"38",rows:"3",placeholder:"Enter a title for this card..."},domProps:{value:e.cardToEdit.title},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void t.preventDefault()}],input:function(t){t.target.composing||e.$set(e.cardToEdit,"title",t.target.value)}}}),r("div",{staticClass:"compose-features"},[r("button",{staticClass:"compose-btn",attrs:{disabled:!e.cardToEdit.title},on:{click:e.add}},[e._v("Add card")]),r("button",{staticClass:"material-icons",on:{click:e.toggleCompose}},[e._v("close")])])]):r("div",{staticClass:"card-compose-btn",on:{click:e.toggleCompose}},[r("span",{staticClass:"material-icons"},[e._v("add")]),e._v(" Add a card ")])},pe=[],me={props:{boardId:{type:String,required:!0},groupId:{type:String,required:!0},isAddCard:{type:Boolean,required:!0}},data:function(){return{cardToEdit:ca.getEmptyCard(),isComposeOn:!0}},mounted:function(){this.isComposeOn=!1},watch:{isComposeOn:{handler:function(){var e=this;this.isComposeOn&&setTimeout((function(){e.$refs.textarea.focus()}),100)}},isAddCard:{handler:function(){this.isAddCard&&(this.isComposeOn=!0)}}},methods:{hideCompose:function(e){e.target.classList.contains("add-card-btn")||(this.isComposeOn=!1),this.$emit("closeAddCard")},add:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},t.next=3,e.$store.dispatch({type:"getMiniUser",userId:e.$store.getters.loggedinUser._id});case 3:return a=t.sent,e.cardToEdit.byMember=a,t.prev=5,t.next=8,e.$store.dispatch({type:"saveCard",card:e.cardToEdit,groupId:e.groupId,boardId:e.boardId});case 8:return s=t.sent,t.next=11,e.$store.dispatch({type:"getGroupById",groupId:e.groupId,boardId:e.boardId});case 11:n=t.sent,o={txt:"added ".concat(s.title," to ").concat(n.title),card:{id:s.id,title:s.title}},$.$emit("addActivity",o),e.$emit("socketUpdateBoard"),e.cardToEdit=ca.getEmptyCard(),e.$refs.textarea.focus(),r={txt:"Card was successfully added",type:"success"},t.next=24;break;case 20:throw t.prev=20,t.t0=t["catch"](5),r={txt:"Fail to add card, try again later",type:"error"},t.t0;case 24:return t.prev=24,t.next=27,e.$store.dispatch({type:"showMsg",msg:r});case 27:return t.finish(24);case 28:case"end":return t.stop()}}),t,null,[[5,20,24,28]])})))()},toggleCompose:function(){this.isComposeOn=!this.isComposeOn,this.isComposeOn||this.$emit("closeAddCard")}}},he=me,ge=Object(k["a"])(he,ue,pe,!1,null,null,null),fe=ge.exports,ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"group-menu"},[r("div",{staticClass:"card-edit-header"},[r("span",[e._v("List actions")]),r("span",{staticClass:"close material-icons-outlined close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])]),r("div",{staticClass:"card-edit-main"},[r("button",{staticClass:"add-card-btn",on:{click:e.addCard}},[e._v("Add card...")]),r("button",{on:{click:e.removeGroup}},[e._v("Delete list")])])])},be=[],Ce={props:{group:{type:Object,required:!0}},methods:{close:function(){this.$emit("closeGroupMenu")},removeGroup:function(){this.$emit("removeGroup")},addCard:function(){this.$emit("addCard"),this.close()}}},ke=Ce,ye=Object(k["a"])(ke,ve,be,!1,null,null,null),we=ye.exports,_e=r("b76a"),xe=r.n(_e);function Be(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function Ee(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function Ie(){for(var e="0123456789ABCDEF",t="#",r=0;r<6;r++)t+=e[Math.floor(16*Math.random())];return t}var Oe={makeId:Be,getRandomInt:Ee,getRandomColor:Ie};function Te(e,t){var r=null;return function(){clearTimeout(r);var a=arguments,s=this;r=setTimeout((function(){e.apply(s,a)}),t)}}var je={props:{group:{type:Object,required:!0},board:{type:Object,required:!0},isCardPreviewLabelsShown:{type:Boolean,required:!0},darkWindow:{type:Object},loggedinUser:{type:Object}},components:{cardPreview:de,cardCompose:fe,groupMenu:we,draggable:xe.a},data:function(){return{lastTitleChar:"",isAddCard:!1,showGroupMenu:!1,isTitleEdit:!1}},created:function(){this.updateTitleDebounce=Te(this.saveGroupTitle,1e3)},methods:{updateCard:function(e){console.log("updateCard from group-list",e),this.$emit("updateCard",e,this.group.id)},close:function(){this.isTitleEdit=!1},showTitleInput:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isTitleEdit=!0,t.next=4,setTimeout((function(){e.$refs.titleGroup.$el.focus()}),100);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("Error showing input",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},hidePopup:function(){this.showGroupMenu=!1},socketUpdateBoard:function(){this.$emit("socketUpdateBoard")},removeGroup:function(){this.$emit("removeGroup",this.group.id)},addCard:function(){this.isAddCard=!0},toggleGroupMenu:function(){this.showGroupMenu=!this.showGroupMenu},saveGroupTitle:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,""!==e.group.title){t.next=3;break}return t.abrupt("return",e.group.title=e.lastTitleChar);case 3:e.lastTitleChar=e.group.title,e.updateGroup(),e.isTitleEdit=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("Had a problem updating group title",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},updateGroup:function(){this.$emit("updateGroup",this.group)},updateBoardAfterDrag:function(){this.$emit("updateBoardAfterDrag")},toggleLabelsTitles:function(){this.$emit("toggleLabelsTitles")},setToPreviewEdit:function(e,t){this.$emit("setToPreviewEdit",e,t)}}},Re=je,De=Object(k["a"])(Re,B,E,!1,null,null,null),$e=De.exports,Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"board-header"},[r("div",{staticClass:"board-members-section"},[r("div",{staticClass:"board-section"},[e.isEditing?r("contenteditable",{staticClass:"board-header-btn title-board",attrs:{tag:"h1",contenteditable:!0,noNL:!1,noHTML:!0},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateTitle.apply(null,arguments)},input:e.updateTitle},model:{value:e.boardTitleToEdit,callback:function(t){e.boardTitleToEdit=t},expression:"boardTitleToEdit"}}):r("h1",{staticClass:"board-header-btn title-board",on:{click:function(t){e.isEditing=!e.isEditing}}},[e._v(" "+e._s(e.boardTitle)+" ")]),r("span",{staticClass:"material-icons-round board-header-btn star",class:e.selected,on:{click:e.toggleStar}},[e._v("star_outline")])],1),r("span",{staticClass:"seperator"},[e._v("|")]),r("div",{staticClass:"members-section"},[e.board.members.length?r("section",{staticClass:"avatars"},e._l(e.board.members,(function(e){return r("avatar",{key:e.id,attrs:{username:e.fullname,src:e.imgUrl,size:28,backgroundColor:"#DFE1E6",color:"#172b4d",customStyle:{fontSize:"12px"}}})})),1):e._e(),r("button",{staticClass:"board-header-btn invite-btn",on:{click:function(t){return t.stopPropagation(),e.toggleMemberMenu.apply(null,arguments)}}},[e._v(" Invite ")]),e.isMembersMenuOpen?r("boardMembersEdit",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closeMembersMenu,expression:"closeMembersMenu"}],staticClass:"popup members-popup",attrs:{users:e.users,members:e.board.members},on:{updateMembers:e.updateMembers,close:function(t){e.isMembersMenuOpen=!1}}}):e._e()],1)]),r("div",{staticClass:"menu-section"},[r("button",{staticClass:"board-header-btn menu-section dashboard",on:{click:e.openDashboard}},[r("span",{staticClass:"material-icons-outlined"},[e._v(" leaderboard ")])]),r("button",{staticClass:"board-header-btn menu-section",on:{click:function(t){t.stopPropagation(),e.isSideMenuOpen=!0}}},[r("span",{staticClass:"material-icons title"},[e._v("more_horiz")]),r("span",{staticClass:"word-show"},[e._v("Show")]),r("span",{staticClass:"word-menu"},[e._v("menu")])]),r("transition",{attrs:{name:"slide"}},[e.isSideMenuOpen?r("sideMenu",{staticClass:"popup",attrs:{board:e.board},on:{updateMembers:e.updateMembers,close:function(t){e.isSideMenuOpen=!1},setBackground:e.setBackground,openDeletePopup:e.openDeletePopup}}):e._e()],1)],1)])},Ue=[],Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"card-edit-header"},[r("span",[e._v("Invite to Board")]),r("span",{staticClass:"close material-icons-outlined close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])]),r("div",{staticClass:"card-edit-main popup-layout-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterName,expression:"filterName"}],attrs:{type:"text",placeholder:"Search members"},domProps:{value:e.filterName},on:{input:function(t){t.target.composing||(e.filterName=t.target.value)}}}),r("ul",{staticClass:"board-members-list"},e._l(e.membersToDisplay,(function(t){return r("li",{key:t._id,staticClass:"card-member-preview",on:{click:function(r){return e.toggleUserAsBoardMember(t)}}},[r("div",{staticClass:"member-name"},[r("avatar",{attrs:{size:28,username:t.fullname,src:t.imgUrl,color:"#172b4d",backgroundColor:"#dfe1e6"}}),r("span",[e._v(e._s(t.fullname)+" ("+e._s(t.username)+")")])],1),t.isBoardMember?r("span",{staticClass:"material-icons-outlined check-member-icon"},[e._v("check")]):e._e()])})),0)])])},Se=[],Ae={components:{avatar:d.a},props:{users:{type:Array,required:!0},members:{type:Array,required:!0}},data:function(){return{membersToEdit:null,filteredBoardMembers:null,filterName:""}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"loadUsers"});case 3:e.membersToEdit=JSON.parse(JSON.stringify(e.members)),e.filterBoardMembers(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("Error loading users:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},watch:{members:{handler:function(){this.filterBoardMembers()}}},computed:{allUsers:function(){return this.$store.getters.users},membersToDisplay:function(){var e=this.filteredBoardMembers;if(!this.filterName)return e;var t=new RegExp(this.filterName,"i");return e.filter((function(e){return t.test(e.username)||t.test(e.fullname)}))}},methods:{toggleUserAsBoardMember:function(e){var t=this.membersToEdit.findIndex((function(t){return t._id===e._id}));if(-1===t){var r={username:e.username,fullname:e.fullname,_id:e._id,imgUrl:e.imgUrl};this.membersToEdit.push(r)}else this.membersToEdit.splice(t,1);this.updateMembers()},filterBoardMembers:function(){var e=JSON.parse(JSON.stringify(this.users));e.forEach((function(e){return e.isBoardMember=!1})),this.members.forEach((function(t){var r=e.find((function(e){return e._id===t._id}));r&&(r.isBoardMember=!0)})),this.filteredBoardMembers=e},updateMembers:function(){this.$emit("updateMembers",this.membersToEdit)},close:function(){this.$emit("close")}}},Pe=Ae,Ne=Object(k["a"])(Pe,Le,Se,!1,null,null,null),Fe=Ne.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"side-menu-popup"},[a("div",{staticClass:"card-edit-header"},[a("transition",{attrs:{name:"slide-right"}},[""!==e.deeperOption?a("span",{staticClass:"material-icons-outlined back",on:{click:function(t){return e.setDeeperOption("")}}},[e._v("arrow_back_ios")]):e._e()]),"photos"===e.deeperOption?a("span",[e._v(e._s(e.title)+" "),a("span",{staticClass:"unsplash",on:{click:e.openNewWindowUnsplash}},[e._v("unsplash")])]):a("span",[e._v(e._s(e.title)+" ")]),a("span",{staticClass:"close-popup-btn material-icons",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])],1),""===e.deeperOption?a("div",{staticClass:"card-edit-main popup-layout-1"},[a("ul",{staticClass:"first-option"},[a("li",{staticClass:"clickable",on:{click:function(t){return e.setDeeperOption("changeBackground")}}},[a("span",{staticClass:"background icon",style:e.background}),a("span",{staticClass:"option"},[e._v("Change background")])]),a("li",{staticClass:"clickable",on:{click:function(t){return e.setDeeperOption("searchCards")}}},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("search")]),a("span",{staticClass:"option"},[e._v("Search cards")])]),a("li",{staticClass:"clickable",on:{click:e.remove}},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("delete_outline")]),a("span",{staticClass:"option"},[e._v("Delete Board")])])]),a("activity",{attrs:{activities:e.activities,hasHeader:!0}})],1):e._e(),a("transition",{attrs:{name:"slide-from-right"}},["changeBackground"===e.deeperOption?a("div",{staticClass:"popup-layout-1 change-background"},[a("ul",[a("div",{on:{click:function(t){return e.setDeeperOption("photos")}}},[a("img",{attrs:{src:"https://a.trellocdn.com/prgb/dist/images/photos-thumbnail@3x.8f9c1323c9c16601a9a4.jpg",alt:""}}),a("p",[e._v("Photos")])]),a("div",{on:{click:function(t){return e.setDeeperOption("colors")}}},[a("img",{attrs:{src:"https://a.trellocdn.com/prgb/dist/images/colors@2x.ec32a2ed8dd8198b8ef0.jpg",alt:""}}),a("p",[e._v("Colors")])])])]):e._e()]),a("transition",{attrs:{name:"slide-from-right"}},["colors"===e.deeperOption?a("div",{staticClass:"colors"},[a("ul",e._l(e.colors,(function(t){return a("li",{key:t,staticClass:"color",style:{backgroundColor:t},on:{click:function(r){return e.changeBackground(t,"")}}})})),0)]):e._e()]),a("transition",{attrs:{name:"slide-from-right"}},["photos"===e.deeperOption?a("div",{staticClass:"photos"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.photosFilterBy,expression:"photosFilterBy"}],attrs:{type:"text",placeholder:"Photos"},domProps:{value:e.photosFilterBy},on:{input:[function(t){t.target.composing||(e.photosFilterBy=t.target.value)},e.getPhotos]}}),e.photosUrls.length?a("ul",e._l(e.photosUrls,(function(t){return a("li",{key:t,staticClass:"photo",style:{backgroundImage:"url("+t+")"},on:{click:function(r){return e.changeBackground("",t)}}})})),0):e._e(),e.isLoading?a("img",{staticClass:"loading-gif",attrs:{src:r("cf1c"),alt:""}}):e._e()]):e._e()]),a("transition",{attrs:{name:"slide-from-right"}},["searchCards"===e.deeperOption?a("div",{staticClass:"search-cards"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.cardsFilterBy.txt,expression:"cardsFilterBy.txt"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:e.cardsFilterBy.txt},on:{input:[function(t){t.target.composing||e.$set(e.cardsFilterBy,"txt",t.target.value)},e.searchCards]}}),e.boardLabels.length?a("ul",e._l(e.boardLabels,(function(t){return a("li",{key:t.id,staticClass:"label-preview",on:{click:function(r){return e.filterCardsByLabel(t.id)}}},[a("div",{staticClass:"label-container"},[a("span",{staticClass:"label-clr",style:{backgroundColor:t.color}}),a("span",[e._v(e._s(t.title))])]),t.isFilterBy?a("span",{staticClass:"material-icons-outlined check-label-icon"},[e._v("check")]):e._e()])})),0):e._e(),e.boardMembers.length?a("ul",{staticClass:"members"},e._l(e.boardMembers,(function(t){return a("li",{key:t.id,staticClass:"card-member-preview",on:{click:function(r){return e.filterCardsByMember(t._id)}}},[a("div",{staticClass:"member-name"},[a("avatar",{attrs:{size:32,username:t.fullname,src:t.imgUrl,color:"#172b4d",backgroundColor:"#dfe1e6"}}),a("span",[e._v(e._s(t.fullname)+" ("+e._s(t.username)+")")])],1),t.isFilterBy?a("span",{staticClass:"material-icons-outlined check-member-icon"},[e._v("check")]):e._e()])})),0):e._e(),a("ul",{staticClass:"due-date"},e._l(e.dateFilterOptions,(function(t){return a("li",{key:t.txt,staticClass:"date-preview",on:{click:function(r){return e.filterCardsByDueDate(t.timeLeft)}}},[a("span",[e._v(e._s(t.txt))]),t.isFilterBy?a("span",{staticClass:"material-icons-outlined check-due-date-icon"},[e._v("check")]):e._e()])})),0)]):e._e()])],1)},He=[],qe=h.a.create({}),ze="FtAiz5o_uM9Ab_oizQTJSEHWEqQaBm6ygimUsEWNKlc",We={query:Je};function Je(e){return Ye.apply(this,arguments)}function Ye(){return Ye=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe({url:"https://api.unsplash.com/search/photos?query=".concat(t,"&client_id=").concat(ze,"&orientation=landscape&per_page=50")});case 3:return r=e.sent,e.abrupt("return",r.data.results);case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("Had a problem getting photos from unsplash",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ye.apply(this,arguments)}var Ke,Ze,Ve,Qe,Xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"first-option activities"},[e.hasHeader?r("li",{staticClass:"activity"},[r("span",{staticClass:"material-icons-outlined icon"},[e._v("format_list_bulleted")]),r("span",{staticClass:"option"},[e._v("Activity")])]):e._e(),e._l(e.activities,(function(t){return r("li",{key:t.id,staticClass:"activity"},[r("avatar",{staticClass:"avatar-activity",attrs:{size:32,username:t.byMember.fullname,src:t.byMember.imgUrl,backgroundColor:"#DFE1E6",color:"#172b4d"}}),r("div",{staticClass:"info"},[r("p",{staticClass:"option"},[r("span",{staticClass:"activity-user"},[e._v(e._s(t.byMember.fullname)+" ")]),r("span",{staticClass:"activity-txt"},[e._v(e._s(t.txt))])]),r("span",{staticClass:"activity-time"},[e._v(e._s(e._f("moment")(t.createdAt,"from","now")))])])],1)}))],2)},et=[],tt={props:{activities:{type:Array,required:!0},hasHeader:{type:Boolean,required:!0}},components:{avatar:d.a}},rt=tt,at=Object(k["a"])(rt,Xe,et,!1,null,null,null),st=at.exports,nt={props:{board:{type:Object,required:!0}},data:function(){return{isLoading:!1,deeperOption:"",cardsFilterBy:{txt:"",labelIds:[],memberIds:[],timeLeft:0},boardMembers:[],boardLabels:[],photosFilterBy:"",dateFilterOptions:[{txt:"Due in the next day",timeLeft:864e5,isFilterBy:!1},{txt:"Due in the next week",timeLeft:6048e5,isFilterBy:!1},{txt:"Due in the next month",timeLeft:24192e5,isFilterBy:!1}],photosUrls:["https://images.unsplash.com/photo-1485356824219-4bc17c2a2ea7?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80","https://images.unsplash.com/photo-1490079027102-cd08f2308c73?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80","https://images.unsplash.com/photo-1611421964761-452bcf2a4a24?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=665&q=80","https://images.unsplash.com/photo-1490643056814-058241121f45?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTB8fHRyZWxsb3xlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60","https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=753&q=80","https://images.unsplash.com/photo-1439923274069-a6f070db0c99?ixid=MnwxMjA3fDB8MHxzZWFyY2h8M3x8YmFja2dyb3VuZHN8ZW58MHx8MHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60","https://images.unsplash.com/photo-1524169113253-c6ba17f68498?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTh8fGJhY2tncm91bmRzfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60","https://images.unsplash.com/photo-1554034483-04fda0d3507b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mjd8fGJhY2tncm91bmRzfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=600&q=60","https://images.unsplash.com/photo-1500673922987-e212871fec22?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MzN8fGJhY2tncm91bmRzfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60","https://images.unsplash.com/photo-1507608869274-d3177c8bb4c7?ixid=MnwxMjA3fDB8MHxzZWFyY2h8OTd8fGJhY2tncm91bmRzfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=60"],colors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"],photos:null}},created:function(){this.getPhotos=Te(this.getPhotos,500),this.searchCards=Te(this.searchCards,500),this.boardLabels=JSON.parse(JSON.stringify(this.board.labels)),this.cardsFilterBy=this.$store.getters.filterBy,console.log("boardLabels",this.boardLabels),this.filterIsLabelFilterActive(),this.boardMembers=JSON.parse(JSON.stringify(this.board.members))},destroyed:function(){},computed:{background:function(){return this.board.style["background-color"]?{"background-color":this.board.style["background-color"]}:{"background-image":this.board.style["background-image"]}},activities:function(){return JSON.parse(JSON.stringify(this.board.activities)).reverse()},title:function(){var e="";switch(this.deeperOption){case"changeBackground":e="Change background";break;case"searchCards":e="Search cards";break;case"colors":e="Colors";break;case"photos":e="Photos by";break;case"":e="Menu";break}return e}},watch:{deeperOption:{immediate:!0,handler:function(){"searchCards"===this.deeperOption&&(this.filterIsLabelFilterActive(),this.filterIsMemberFilterActive())}}},methods:{getPhotos:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.photosUrls=[],t.next=5,We.query(e.photosFilterBy.toLowerCase());case 5:r=t.sent,e.photosUrls=r.map((function(e){return e.urls.regular})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log("Had a problem getting photos",t.t0);case 12:return t.prev=12,e.isLoading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},setDeeperOption:function(e){this.deeperOption=e},close:function(){this.$emit("close")},remove:function(){this.close(),this.$emit("openDeletePopup")},changeBackground:function(e,t){var r={"background-color":e,"background-image":"url(".concat(t,"}&fit=scale&w=").concat(window.screen.width-300,"&h=").concat(window.screen.height-300,")")};this.$emit("setBackground",r)},openNewWindowUnsplash:function(){window.open("https://unsplash.com/")},searchCards:function(){this.$store.commit({type:"setFilterBy",filterBy:this.cardsFilterBy})},filterCardsByLabel:function(e){var t=this.cardsFilterBy.labelIds.findIndex((function(t){return t===e}));if(-1!==t)return this.cardsFilterBy.labelIds.splice(t,1),this.filterIsLabelFilterActive(),this.searchCards();this.cardsFilterBy.labelIds.push(e),this.filterIsLabelFilterActive(),this.searchCards()},filterIsLabelFilterActive:function(){var e=this;console.log("this.cardsFilterBy",this.cardsFilterBy);var t=JSON.parse(JSON.stringify(this.boardLabels)).map((function(t){return t.isFilterBy=!!e.cardsFilterBy.labelIds.some((function(e){return e===t.id})),t}));this.boardLabels=t},filterCardsByMember:function(e){var t=this.cardsFilterBy.memberIds.findIndex((function(t){return t===e}));if(-1!==t)return this.cardsFilterBy.memberIds.splice(t,1),this.filterIsMemberFilterActive(),this.searchCards();this.cardsFilterBy.memberIds.push(e),this.filterIsMemberFilterActive(),this.searchCards()},filterIsMemberFilterActive:function(){var e=this;if(this.boardLabels.length&&"searchCards"===this.deeperOption){var t=this.boardMembers.map((function(t){return t.isFilterBy=!!e.cardsFilterBy.memberIds.some((function(e){return e===t._id})),t}));this.boardMembers=t}},filterCardsByDueDate:function(e){var t=e===this.cardsFilterBy.timeLeft;if(t)return this.cardsFilterBy.timeLeft=0,this.filterIsDueDateFilterActive(e),this.searchCards();this.cardsFilterBy.timeLeft=e,this.filterIsDueDateFilterActive(e),this.searchCards()},filterIsDueDateFilterActive:function(e){if("searchCards"===this.deeperOption){var t=this.dateFilterOptions.map((function(t){return t.isFilterBy?(t.isFilterBy=!1,t):(t.isFilterBy=t.timeLeft===e,t)}));this.dateFilterOptions=t}}},components:{avatar:d.a,activity:st}},ot=nt,it=Object(k["a"])(ot,Ge,He,!1,null,null,null),ct=it.exports,lt={props:{board:{type:Object,required:!0}},data:function(){return{boardTitleToEdit:null,isEditing:!0,isMembersMenuOpen:!1,isSideMenuOpen:!1}},computed:{selected:function(){return{selected:this.board.isStarred}},users:function(){return this.$store.getters.users},boardTitle:function(){return JSON.parse(JSON.stringify(this.board.title))}},created:function(){this.updateTitle=Te(this.updateTitle,2e3)},watch:{boardTitle:{immediate:!0,handler:function(){this.boardTitleToEdit=this.boardTitle}}},methods:{setBackground:function(e){this.$emit("setBackground",e)},toggleMemberMenu:function(){this.isMembersMenuOpen=!this.isMembersMenuOpen},closeMembersMenu:function(){this.isMembersMenuOpen=!1},closeSideMenu:function(){this.isSideMenuOpen=!1},toggleStar:function(){this.$emit("toggleStar")},updateTitle:function(){this.isEditing=!1,console.log("EMITTING",this.boardTitleToEdit),this.$emit("updateTitle",this.boardTitleToEdit)},updateMembers:function(e){this.$emit("updateMembers",e)},openDeletePopup:function(){this.$emit("openDeletePopup")},openDashboard:function(){this.$emit("openDashboard")}},components:{boardMembersEdit:Fe,avatar:d.a,sideMenu:ct}},dt=lt,ut=Object(k["a"])(dt,Me,Ue,!1,null,null,null),pt=ut.exports,mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isComposeOn?r("div",{staticClass:"group-compose"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.groupToCompose.title,expression:"groupToCompose.title"}],ref:"titleInput",attrs:{type:"text",placeholder:"Enter list title..."},domProps:{value:e.groupToCompose.title},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void t.preventDefault()},input:function(t){t.target.composing||e.$set(e.groupToCompose,"title",t.target.value)}}}),r("div",{staticClass:"compose-features"},[r("button",{staticClass:"compose-btn",attrs:{disabled:!e.groupToCompose.title},on:{click:e.add}},[e._v(" Add list ")]),r("button",{staticClass:"material-icons",on:{click:e.toggleCompose}},[e._v("close")])])]):r("div",{staticClass:"group-compose-btn",on:{click:e.toggleCompose}},[e._m(0)])},ht=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"group-compose-btn-content btn-container"},[r("span",{staticClass:"material-icons"},[e._v("add")]),e._v("Add another list ")])}],gt={props:{boardId:{type:String,required:!0},isBoardEmpty:{type:Boolean,required:!0}},mounted:function(){this.isBoardEmpty&&(this.isComposeOn=!0)},data:function(){return{groupToCompose:ca.getEmptyGroup(),isComposeOn:!1}},watch:{isComposeOn:{immediate:!0,handler:function(){var e=this;this.isComposeOn&&setTimeout((function(){e.$refs.titleInput.focus()}),1)}}},methods:{add:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r={},e.groupToCompose.title){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$store.dispatch({type:"saveGroup",group:e.groupToCompose,boardId:e.boardId});case 6:a={txt:"added ".concat(e.groupToCompose.title," to this board")},$.$emit("addActivity",a),e.$emit("socketUpdateBoard"),e.groupToCompose=ca.getEmptyGroup(),setTimeout((function(){e.$refs.titleInput.focus()}),100),r={txt:"List was successfully added",type:"success"},t.next=18;break;case 14:throw t.prev=14,t.t0=t["catch"](0),r={txt:"Fail to add list, try again later",type:"error"},t.t0;case 18:return t.prev=18,t.next=21,e.$store.dispatch({type:"showMsg",msg:r});case 21:return t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[0,14,18,22]])})))()},toggleCompose:function(){this.isComposeOn=!this.isComposeOn}}},ft=gt,vt=Object(k["a"])(ft,mt,ht,!1,null,null,null),bt=vt.exports,Ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"container-dashboard",on:{click:e.closeDashboard}},[r("div",{staticClass:"dashboard",on:{click:function(e){e.stopPropagation()}}},[r("header",{staticClass:"dashboard-header"},[r("span",{staticClass:"close material-icons-outlined",on:{click:e.closeDashboard}},[e._v("close")])]),r("main",{staticClass:"dashboard-main"},[r("div",{staticClass:"statistics"},[r("article",{staticClass:"total-cards"},[r("span",{staticClass:"material-icons-outlined dashboard-icon icon-total-cards"},[e._v("text_snippet")]),r("div",{staticClass:"info"},[r("span",{staticClass:"count"},[e._v(" "+e._s(e.titalCards))]),r("span",{staticClass:"title"},[e._v(" Total cards ")])])]),r("article",{staticClass:"unassigned-cards"},[r("span",{staticClass:"material-icons-outlined dashboard-icon icon-unassigned-cards"},[e._v(" help_outline")]),r("div",{staticClass:"info"},[r("span",{staticClass:"count"},[e._v(" "+e._s(e.unassignedCards))]),r("span",{staticClass:"title"},[e._v(" Unassigned Cards ")])])]),r("article",{staticClass:"members"},[r("span",{staticClass:"material-icons-outlined dashboard-icon icon-member"},[e._v("person_outline")]),r("div",{staticClass:"info"},[r("span",{staticClass:"count"},[e._v(" "+e._s(e.board.members.length))]),r("span",{staticClass:"title"},[e._v(" Members ")])])]),r("article",{staticClass:"activities"},[r("span",{staticClass:"material-icons-outlined dashboard-icon icon-activities"},[e._v("task_alt")]),r("div",{staticClass:"info"},[r("span",{staticClass:"count"},[e._v(" "+e._s(e.board.activities.length))]),r("span",{staticClass:"title"},[e._v(" Activities ")])])])]),r("div",{staticClass:"charts"},[r("div",{staticClass:"chart-container"},[r("div",{staticClass:"title-chart"},[e._v(" Cards per list")]),r("chart-card-per-group",{staticClass:"card-per-group",attrs:{board:e.board}})],1),r("div",{staticClass:"chart-container"},[r("div",{staticClass:"title-chart"},[e._v(" Cards per Member")]),r("chart-card-per-member",{staticClass:"card-per-member",attrs:{board:e.board}})],1)])])])])},kt=[],yt=(r("b64b"),r("07ac"),r("1fca")),wt={extends:yt["a"],props:{board:{type:Object,required:!0}},data:function(){return{options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},colors:[]}},mounted:function(){var e=this.getGroupCardsMap;this.setColors(),this.renderChart({labels:Object.keys(e),datasets:[{backgroundColor:this.colors,data:Object.values(e),hoverBorderWidth:2,hoverBorderColor:"gray"}]},this.options)},methods:{setColors:function(){for(var e=0;e<this.board.groups.length;e++)this.colors.push(Oe.getRandomColor())}},computed:{getGroupCardsMap:function(){return this.board.groups.reduce((function(e,t){return e[t.title]=0,t.cards.reduce((function(r){return e[t.title]=r,++r}),0),e}),{})}},destroyed:function(){this.colors=[]}},_t=wt,xt=Object(k["a"])(_t,Ke,Ze,!1,null,null,null),Bt=xt.exports,Et={extends:yt["b"],props:{board:{type:Object,required:!0}},data:function(){return{options:{legend:{labels:{fontSize:11}}},colors:[]}},mounted:function(){var e=this.getCardByMemberMap;this.setColors(),this.renderChart({labels:Object.keys(e),datasets:[{backgroundColor:this.colors,data:Object.values(e)}]},this.options)},methods:{setColors:function(){for(var e=0;e<this.board.members.length;e++)this.colors.push(Oe.getRandomColor())}},computed:{getCardByMemberMap:function(){var e=this;return this.board.members.reduce((function(t,r){return t[r.username]=0,e.board.groups.forEach((function(e){e.cards.forEach((function(a){var s=a.members.findIndex((function(e){return e._id===r._id}));-1!==s&&(console.log(r.username,e.title,s),t[r.username]++)}))})),t}),{})}},destroyed:function(){this.colors=[]}},It=Et,Ot=Object(k["a"])(It,Ve,Qe,!1,null,null,null),Tt=Ot.exports,jt={props:{board:{type:Object,required:!0}},components:{chartCardPerGroup:Bt,chartCardPerMember:Tt},methods:{closeDashboard:function(){this.$emit("closeDashboard")}},computed:{titalCards:function(){return this.board.groups.reduce((function(e,t){return e+=t.cards.reduce((function(e){return++e}),0),e}),0)},unassignedCards:function(){return this.board.groups.reduce((function(e,t){return e+=t.cards.reduce((function(e,t){return t.members.length||e++,e}),0),e}),0)}}},Rt=jt,Dt=Object(k["a"])(Rt,Ct,kt,!1,null,null,null),$t=Dt.exports,Mt=r("34f3"),Ut=r("8055"),Lt=r.n(Ut),St="user-watch",At="currBoard",Pt="board update",Nt="board updated",Ft="user-updated",Gt="",Ht=qt();function qt(){var e=null,t={setup:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Lt()(Gt);case 1:case"end":return t.stop()}}),t)})))()},on:function(t,r){e.on(t,r)},off:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(r?e.off(t,r):e.removeAllListeners(t))},emit:function(t,r){e.emit(t,r)},terminate:function(){e=null}};return t}window.socketService=Ht;var zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"delete-popup popup"},[r("div",{staticClass:"header"},[r("h1",[e._v("Delete board?")]),r("span",{staticClass:"close material-icons close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])]),r("main",[r("p",[e._v("Delete a board is permanent. There is no undo.")]),r("button",{staticClass:"remove-btn",on:{click:e.removeBoard}},[e._v("Delete")])])])},Wt=[],Jt={methods:{removeBoard:function(){this.$emit("removeBoard"),this.setDarkWindow(!1)},close:function(){this.$emit("close"),this.setDarkWindow(!1)},setDarkWindow:function(e){this.$emit("setDarkWindow","deleteBoard",e)}}},Yt=Jt,Kt=Object(k["a"])(Yt,zt,Wt,!1,null,null,null),Zt=Kt.exports,Vt={directives:{dragscroll:Mt["a"]},components:{groupList:$e,boardHeader:pt,groupCompose:bt,dashboard:$t,draggable:xe.a,deletePopup:Zt},props:{darkWindow:{type:Object},loggedinUser:{immediate:!0,type:Object}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{$.$on("addActivity",function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"addActivity",activity:r});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(r){console.log("ERROR, cannot SignupAsGuest or addActivity",r)}case 1:case"end":return t.stop()}}),t)})))()},computed:{boardId:function(){return this.$route.params.boardId},board:function(){return this.$store.getters.currBoard},isBoardEmpty:function(){return 0===this.board.groups.length},unfilteredBoard:function(){return this.$store.state.boardStore.currBoard}},watch:{"$route.params.boardId":{immediate:!0,handler:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.params.boardId,t.prev=1,t.next=4,e.$store.dispatch({type:"loadBoard",boardId:r});case 4:a=t.sent,s={txt:"",labelIds:[],memberIds:[],timeLeft:0},e.$store.commit({type:"setFilterBy",filterBy:s}),e.$emit("setBackground",a.style),Ht.emit(At,e.boardId),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log("ERROR: cannot get board");case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},"unfilteredBoard.style":{handler:function(){this.$emit("setBackground",this.unfilteredBoard.style)}},"darkWindow.deleteBoard":{handler:function(){this.isRemovePopupOpen=this.darkWindow.deleteBoard}}},data:function(){return{isCardPreviewLabelsShown:!1,isDashboardOpen:!1,x:0,y:0,dragPreview:null,isRemovePopupOpen:!1}},methods:{updateBoardAfterDrag:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Ahalan ya habub",e.board),t.next=4,e.$store.dispatch({type:"saveBoardAfterDrag",board:e.board});case 4:e.socketUpdateBoard(),t.next=13;break;case 7:return t.prev=7,t.t0=t["catch"](0),console.log("Had a problem updating board after drag",t.t0),r={txt:"Failed to drag items, try again without active filter",type:"error"},t.next=13,e.$store.dispatch({type:"showMsg",msg:r});case 13:case"end":return t.stop()}}),t,null,[[0,7]])})))()},updateCard:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log("from board, updateCard",e,t,r.board._id),a.next=4,r.$store.dispatch({type:"saveCard",card:e,groupId:t,boardId:r.board._id});case 4:console.log("da",r.$store.state),r.socketUpdateBoard(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("Had a problem updating card from board",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},updateGroup:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("from board, updateGroupTitle",e,t.board._id),a=JSON.parse(JSON.stringify(e)),a.title=e.title,r.next=5,t.$store.dispatch({type:"saveGroup",group:e,boardId:t.board._id});case 5:t.socketUpdateBoard();case 6:case"end":return r.stop()}}),r)})))()},removeBoard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},t.prev=1,t.next=4,e.$store.dispatch({type:"removeBoard",boardId:e.boardId});case 4:e.$store.commit({type:"removeBoardFromRecentBoards",board:e.board}),e.$router.push("/b"),r={txt:"Board was successfully removed",type:"success"},t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),r={txt:"Failed to remove board, try again later",type:"error"};case 12:return t.prev=12,t.next=15,e.$store.dispatch({type:"showMsg",msg:r});case 15:return t.finish(12);case 16:case"end":return t.stop()}}),t,null,[[1,9,12,16]])})))()},socketUpdateBoard:function(){console.log("SOCKETUPDATEBOARDMOTHREREUFJKER SOCKETING"),Ht.emit(Pt,this.unfilteredBoard)},loadBoard:function(){this.$store.dispatch({type:"loadBoard",boardId:this.board._Id})},toggleLabelsTitles:function(){this.isCardPreviewLabelsShown=!this.isCardPreviewLabelsShown},updateBoardTitle:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=JSON.parse(JSON.stringify(t.unfilteredBoard)),console.log("boardToSave",a),a.title=e,console.log("title",a.title),r.next=7,t.$store.dispatch({type:"saveBoard",board:a});case 7:t.socketUpdateBoard(),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log("Had a problem updating board title",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},toggleStar:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.unfilteredBoard,r.isStarred=!r.isStarred,t.next=5,e.$store.dispatch({type:"saveBoard",board:r});case 5:e.socketUpdateBoard(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("ERROR: cannot save board ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},removeGroup:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={},r.prev=1,r.next=4,t.$store.dispatch({type:"getGroupById",groupId:e,boardId:t.board._id});case 4:return s=r.sent,r.next=7,t.$store.dispatch({type:"removeGroup",groupId:e,boardId:t.board._id});case 7:a={txt:"List was successfully removed",type:"success"},n={txt:"deleted list ".concat(s.title)},$.$emit("addActivity",n),t.socketUpdateBoard(),r.next=17;break;case 13:throw r.prev=13,r.t0=r["catch"](1),a={txt:"Fail remove list, try again later",type:"error"},r.t0;case 17:return r.prev=17,r.next=20,t.$store.dispatch({type:"showMsg",msg:a});case 20:return r.finish(17);case 21:case"end":return r.stop()}}),r,null,[[1,13,17,21]])})))()},saveBoard:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=e||t.board,r.next=4,t.$store.dispatch({type:"saveBoard",board:a});case 4:t.socketUpdateBoard(),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log("Error saving board:",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},updateMembers:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{a=t.unfilteredBoard,a.members=e,t.saveBoard(a)}catch(s){console.log("Had a problem updating members",s)}case 1:case"end":return r.stop()}}),r)})))()},setToPreviewEdit:function(e,t){this.$emit("setToPreviewEdit",e,t)},setDarkWindow:function(e,t){this.$emit("setDarkWindow",e,t)},openDeletePopup:function(){this.isRemovePopupOpen=!0,this.setDarkWindow("deleteBoard",!0)},setBackground:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=t.unfilteredBoard,a.style=e,r.next=5,t.saveBoard(a);case 5:t.socketUpdateBoard(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("Had problem setting background",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()}},beforeDestroy:function(){$.$off("addActivity")}},Qt=Vt,Xt=Object(k["a"])(Qt,_,x,!1,null,null,null),er=Xt.exports,tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"boards-page",class:e.classToBoardPage},[r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[e._v("Choose Your Board")]),e.hasBoards?r("ul",{staticClass:"boards-list"},e._l(e.boards,(function(t){return r("li",{key:t._id,staticClass:"boards-preview"},[r("section",{staticClass:"background",style:{backgroundColor:t.style["background-color"],backgroundImage:t.style["background-image"]},on:{click:function(r){return e.openBoard(t._id)}}},[r("div",{staticClass:"title-container"},[r("span",{staticClass:"title-board"},[e._v(" "+e._s(e.boardTitleToShow(t.title))+" ")]),r("span",{staticClass:"star material-icons-round",class:{"is-stared":t.isStarred},on:{click:function(r){return r.stopPropagation(),e.toggleStartted(t)}}},[e._v("star_outline")])])])])})),0):r("h3",{staticClass:"boards-list"},[e._v("You have no boards yet")])])])},rr=[],ar={created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.boards){t.next=9;break}return t.prev=1,t.next=4,e.$store.dispatch({type:"loadBoards"});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log("ERROR cannot load boards");case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()},methods:{openBoard:function(e){this.$router.push("/b/".concat(e))},boardTitleToShow:function(e){return e.length>40?e.substring(0,40)+"...":e},closeAddBoard:function(){this.isAddBoard=!1},addBoard:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"saveBoard",board:e});case 3:return a=r.sent,t.$store.commit({type:"setCurrBoard",board:a}),t.backgroundColor=e.style["background-color"],t.backgroundImg=e.style["background-image"],s={txt:"created this board",byMember:t.$store.getters.getMyMiniUser},r.next=10,t.$store.dispatch({type:"addActivity",activity:s,boardId:a._id});case 10:t.$router.push("/b/".concat(a._id)),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](0),console.log("ERROR cannot add board");case 16:case"end":return r.stop()}}),r,null,[[0,13]])})))()},toggleStartted:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{e.isStarred=!e.isStarred,t.$store.dispatch({type:"saveBoard",board:e})}catch(a){console.log("ERROR: cannot save board ",a)}case 1:case"end":return r.stop()}}),r)})))()}},computed:{boards:function(){return this.$store.getters.boards},hasBoards:function(){return this.$store.getters.boards.length>0},classToBoardPage:function(){return{isLessThen3Boards:this.boards.length<=6,isMoreThen3Boards:this.boards.length>6}}}},sr=ar,nr=Object(k["a"])(sr,tr,rr,!1,null,null,null),or=nr.exports,ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"card-details",on:{click:e.closeCardDetails}},[e.card?a("section",{staticClass:"card-container",on:{click:function(e){e.stopPropagation()}}},[e.card.cover.color?a("section",{staticClass:"cover",style:{backgroundColor:e.card.cover.color}}):e._e(),a("header",{staticClass:"header",class:e.isCoverClass},[a("span",{staticClass:"icon-title material-icons-outlined icon"},[e._v("movie_creation")]),a("section",{staticClass:"titles"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.card.title,expression:"card.title"}],staticClass:"main-title",domProps:{value:e.card.title},on:{input:[function(t){t.target.composing||e.$set(e.card,"title",t.target.value)},e.saveCard]}}),a("h4",{staticClass:"sub-title"},[e._v("in list "+e._s(e.groupName))])]),a("span",{staticClass:"close material-icons",on:{click:e.closeCardDetails}},[e._v(" close ")])]),a("main",{staticClass:"main",class:e.isCoverClass},[a("section",{staticClass:"info-section"},[e.card.members.length?a("div",{staticClass:"members grid-details"},[a("span"),a("h1",{staticClass:"title-members"},[e._v("Members")]),a("div",{staticClass:"list-members"},[e._l(e.card.members,(function(e){return a("avatar",{key:e.id,attrs:{src:e.imgUrl,username:e.fullname,size:32,backgroundColor:"#DFE1E6",color:"#172b4d"}})})),a("span",{staticClass:"item-add-btn",on:{click:function(t){return e.setCurrAction(t,e.actions[0])}}},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("add")])])],2)]):e._e(),e.cardLabels&&e.cardLabels.length?a("div",{staticClass:"labels grid-details"},[a("span"),a("h1",{staticClass:"title-labels"},[e._v("Labels")]),a("div",{staticClass:"list-labels"},[e._l(e.cardLabels,(function(t){return a("span",{key:t.id,staticClass:"preview-label",style:{backgroundColor:t.color},on:{click:function(t){return e.setCurrAction(t,e.actions[1])}}},[a("span",[e._v(e._s(t.title))])])})),a("span",{staticClass:"item-add-btn",on:{click:function(t){return e.setCurrAction(t,e.actions[1])}}},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("add")])])],2)]):e._e(),e.card.dueDate.time?a("div",{staticClass:"date grid-details"},[a("span"),a("h1",{staticClass:"title-date"},[e._v("DUE DATE")]),a("section",{staticClass:"date-main",on:{click:e.openDate}},[a("el-checkbox",{ref:"dueDate",model:{value:e.card.dueDate.isDone,callback:function(t){e.$set(e.card.dueDate,"isDone",t)},expression:"card.dueDate.isDone"}}),a("p",[e._v(e._s(e._f("moment")(e.card.dueDate.time," MMM Do")))]),e.card.dueDate.isDone?a("p",{staticClass:"complete"},[e._v("COMPLETE")]):e._e()],1)]):e._e()]),a("section",{staticClass:"description grid-details"},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("subject")]),a("h1",{staticClass:"title-description title"},[e._v("Description")]),a("contenteditable",{staticClass:"description-text",attrs:{tag:"div",contenteditable:!0,placeholder:"Add a more detailed description...",noNL:!1,noHTML:!0},on:{input:e.saveCard},model:{value:e.card.description,callback:function(t){e.$set(e.card,"description",t)},expression:"card.description"}})],1),e.card.attachments.length||e.isLoading?a("section",{staticClass:"attachments grid-details"},[a("span",{staticClass:"attachments-icon material-icons-outlined icon"},[e._v("attachments")]),a("h1",{staticClass:"title-attachments title"},[e._v("Attachments")]),a("div",{staticClass:"imgs-container"},[e._l(e.card.attachments,(function(t,r){return a("article",{key:r,staticClass:"img-container"},[a("span",{staticClass:"material-icons-outlined delete-img",on:{click:function(r){return e.deleteImg(t)}}},[e._v("delete")]),a("img",{attrs:{src:t.url}}),a("p",[e._v(e._s(e._f("moment")(t.creatAt,"dddd, MMM Do YYYY")))])])})),e.isLoading?a("img",{staticClass:"loading-gif",attrs:{src:r("cf1c"),alt:""}}):e._e()],2)]):e._e(),e.card.checklists.length?a("section",e._l(e.card.checklists,(function(t){return a("section",{key:t.id,staticClass:"checklist grid-details"},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("check_box")]),a("div",{staticClass:"header-checklist"},[a("h1",{staticClass:"title-checklist title"},[e._v(e._s(t.title))]),a("button",{staticClass:"delete btn-details",on:{click:function(r){return e.removeChecklist(t.id)}}},[e._v(" Delete ")])]),a("section",{staticClass:"checklists-list"},[a("section",{staticClass:"checklist-preview"},[a("section",{staticClass:"main-checklist"},[a("section",{staticClass:"scroll-container"},[a("span",{staticClass:"percent"},[e._v(e._s(e.getPercent(t))+"%")]),a("div",{staticClass:"scroll"},[a("div",{staticClass:"scroll-done",class:{"all-done":100===e.getPercent(t)},style:{width:e.getPercent(t)+"%"}})])]),e._l(t.todos,(function(r){return a("article",{key:r.id,staticClass:"checkbox-preview"},[a("el-checkbox",{staticClass:"checkbox-input",on:{change:function(t){return e.addCheckboxActivityAndSave(r)}},model:{value:r.isDone,callback:function(t){e.$set(r,"isDone",t)},expression:"checkbox.isDone"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:r.title,expression:"checkbox.title"}],ref:"infoCheckbox",refInFor:!0,staticClass:"info",class:{"is-done":r.isDone},domProps:{value:r.title},on:{focusout:e.saveCheckbox,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveCheckbox.apply(null,arguments)},input:function(t){t.target.composing||e.$set(r,"title",t.target.value)}}}),a("span",{staticClass:"delete material-icons-outlined icon",on:{click:function(a){return e.deleteCheckbox(r.id,t.id)}}},[e._v("delete")])],1)})),a("section",{staticClass:"all-item-container"},[e.currChecklist!==t.id?a("button",{staticClass:"open-input btn-details",on:{click:function(r){return e.openChanges(t.id)}}},[e._v(" Add an item ")]):a("div",{staticClass:"main-changes"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxTitle,expression:"checkboxTitle"}],ref:"addCheckbox",refInFor:!0,staticClass:"add-item",attrs:{type:"text",placeholder:"Add an item"},domProps:{value:e.checkboxTitle},on:{input:function(t){t.target.composing||(e.checkboxTitle=t.target.value)}}}),a("div",{staticClass:"buttons"},[a("el-button",{staticClass:"add",attrs:{type:"primary",disabled:!e.checkboxTitle},on:{click:e.addCheckbox}},[e._v("Add")]),a("span",{staticClass:"material-icons-outlined close",on:{click:e.closeChanges}},[e._v("close")])],1)])])],2)])])])})),0):e._e(),a("section",{staticClass:"activity grid-details"},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("format_list_bulleted")]),a("div",{staticClass:"header-activity"},[a("h1",{staticClass:"title-activity title"},[e._v("Activity")]),a("button",{staticClass:"toggle-details-activity btn-details",on:{click:e.setShowComments}},[e._v(" "+e._s(e.titleActivityBtn)+" ")])]),a("section",{staticClass:"main-activity"},[a("div",{staticClass:"comment-line"},[a("avatar",{staticClass:"avatar",attrs:{size:32,username:e.getLoggedinUser.fullname,src:e.getLoggedinUser.imgUrl,backgroundColor:"#DFE1E6",color:"#172b4d"}}),a("contenteditable",{ref:"comment",staticClass:"comment-textarea",attrs:{tag:"form",contenteditable:!0,placeholder:"Write a comment...",noNL:!1,noHTML:!0},on:{click:function(t){e.iscommentOpen=!0}},model:{value:e.commentTxt,callback:function(t){e.commentTxt=t},expression:"commentTxt"}}),e.iscommentOpen?a("el-button",{staticClass:"send-comment",attrs:{disabled:!e.commentTxt,type:"primary"},on:{click:e.addComment}},[e._v("Save")]):e._e()],1),a("div",{staticClass:"comment-list"},e._l(e.card.comments,(function(t){return a("article",{key:t.id,staticClass:"comment-preview"},[a("avatar",{staticClass:"avatar",attrs:{size:32,username:t.byMember.fullname,src:t.byMember.imgUrl,backgroundColor:"#DFE1E6",color:"#172b4d"}}),a("section",{staticClass:"comment-info"},[a("h3",{staticClass:"comment-info-header"},[e._v(" "+e._s(t.byMember.fullname)+" "),a("span",[e._v(e._s(e._f("moment")(t.createdAt,"from","now"))+" ")])]),a("p",{staticClass:"comment-info-txt"},[e._v(e._s(t.txt))]),e.isYourComment(t)?a("button",{staticClass:"remove-comment",on:{click:function(r){return e.removeComment(t.id)}}},[e._v(" Delete ")]):e._e()])],1)})),0),"Hide Details"===e.titleActivityBtn?a("activity",{attrs:{activities:e.activitiesToShow,hasHeader:!1}}):e._e()],1)])]),a("nav",{staticClass:"details-actions",class:e.isCoverClass},[e.userNotInclude&&e.userIsMemberShip?a("section",{staticClass:"suggested-nav"},[a("h4",{staticClass:"title"},[e._v("SUGGESTED")]),a("label",{on:{click:e.addUserToCard}},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("person_add")]),a("span",{staticClass:"txt"},[e._v(" Join ")])])]):e._e(),a("section",{staticClass:"add-to-card"},[a("h4",{staticClass:"title"},[e._v("ADD TO CARD")]),e._l(e.actions,(function(t){return a("label",{key:t.name,staticClass:"nav-action",on:{click:function(r){return e.setCurrAction(r,t)}}},[a("span",{staticClass:"material-icons-outlined icon"},[e._v(e._s(t.icon))]),a("span",{staticClass:"txt"},[e._v(" "+e._s(t.name)+" ")])])})),this.card.dueDate.time?a("label",{on:{click:e.removeDate}},[a("span",{staticClass:"material-icons-outlined"},[e._v("history")]),a("span",{staticClass:"txt"},[e._v(" Remove date ")])]):e._e(),e._m(0),a("input",{attrs:{id:"input-file",type:"file",accept:"image/png, image/gif, image/jpeg",hidden:""},on:{change:e.onUploadImg}}),e.isPopupShow?a(e.currAction.type,{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closeEditPopup,expression:"closeEditPopup"}],tag:"component",staticClass:"popup dynamic-component",attrs:{card:e.card,action:e.currAction},on:{close:e.closeEditPopup,updateCard:e.saveCard}}):e._e()],2),a("section",{staticClass:"action-nav"},[a("h4",{staticClass:"title"},[e._v("ACTIONS")]),a("label",{on:{click:e.copyCard}},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("copy")]),a("span",{staticClass:"txt"},[e._v(" Copy")])]),a("label",{on:{click:e.removeCard}},[a("span",{staticClass:"material-icons-outlined icon"},[e._v("delete")]),a("span",{staticClass:"txt"},[e._v(" Delete card ")])])])])]):e._e()])},cr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"input-file"}},[r("span",{staticClass:"attachments-icon material-icons-outlined"},[e._v("attachments")]),r("span",{staticClass:"txt"},[e._v(" Attachment ")])])}],lr=(r("a4d3"),r("e01a"),r("1276"),function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="or21321",a="or21321_unsigned",s="https://api.cloudinary.com/v1_1/".concat(r,"/image/upload"),n=new FormData,n.append("file",t.target.files[0]),n.append("upload_preset",a),e.prev=6,e.next=9,h.a.post(s,n);case 9:return o=e.sent,e.abrupt("return",o.data);case 13:e.prev=13,e.t0=e["catch"](6),console.error("ERROR!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}()),dr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-checklist-edit"},[r("div",{staticClass:"card-edit-header"},[r("span",[e._v("Add checklist")]),r("span",{staticClass:"close material-icons close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("close")])]),r("div",{staticClass:"card-edit-main"},[r("span",{staticClass:"title"},[e._v("Title")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.checklistTitle,expression:"checklistTitle"}],ref:"checklist",attrs:{type:"text",placeholder:"Checklist"},domProps:{value:e.checklistTitle},on:{input:function(t){t.target.composing||(e.checklistTitle=t.target.value)}}}),r("el-button",{staticClass:"add-checklist",attrs:{type:"primary",disabled:!e.checklistTitle},on:{click:e.updateTask}},[e._v("Add")])],1)])},ur=[],pr={props:{action:{type:Object,required:!0},card:{type:Object,required:!0}},data:function(){return{cardToEdit:null,checklistTitle:"Checklist"}},mounted:function(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.$refs.checklist.select()},methods:{updateTask:function(){var e={id:Oe.makeId(),title:this.checklistTitle,todos:[]};this.cardToEdit.checklists.push(e);var t={txt:"added ".concat(this.checklistTitle," to ").concat(this.card.title),card:{id:this.card.id,title:this.card.title}};this.$emit("updateCard",this.cardToEdit,!0),$.$emit("addActivity",t),this.close()},close:function(){this.$emit("close")}}},mr=pr,hr=Object(k["a"])(mr,dr,ur,!1,null,null,null),gr=hr.exports,fr={components:{cardMembersEdit:S,cardLabelsEdit:H,cardChecklistEdit:gr,cardDatesEdit:Z,cardCoverEdit:re,avatar:d.a,activity:st},props:{loggedinUser:{type:Object}},data:function(){return{cardLabels:null,card:null,boardId:this.$route.params.boardId,groupId:this.$route.params.groupId,cardId:this.$route.params.cardId,description:null,groupName:null,checkboxTitle:"",currChecklist:null,titleActivityBtn:"Hide Details",commentTxt:"",iscommentOpen:!1,isLoading:!1,isLoadingCard:!1,actions:[{type:"cardMembersEdit",icon:"person_add",name:"Members"},{type:"cardLabelsEdit",icon:"label",name:"Labels"},{type:"cardChecklistEdit",icon:"check_box",name:"Checklist"},{type:"cardCoverEdit",icon:"wallpaper",name:"Cover"},{type:"cardDatesEdit",icon:"watch_later",name:"Dates"}],currAction:null,isPopupShow:!1}},watch:{"$route.params.cardId":{immediate:!0,handler:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoadingCard=!0,t.next=4,e.loadCard();case 4:return t.next=6,e.$store.dispatch({type:"getGroupById",groupId:e.groupId,boardId:e.boardId});case 6:return r=t.sent,e.groupName=r.title,e.description=e.card.description,t.next=11,e.clearUserNotifications();case 11:e.filterCardLabels(),e.isLoadingCard=!1,t.next=19;break;case 15:throw t.prev=15,t.t0=t["catch"](0),console.log("cannot get card",t.t0),t.t0;case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()}},"currBoard.labels":{handler:function(){this.filterCardLabels()}},"card.dueDate":{deep:!0,handler:function(){this.isLoadingCard?console.log("NOPE"):this.saveCard()}}},mounted:function(){var e=this;this.card&&setTimeout((function(){e.$refs.comment.$el.addEventListener("focusout",e.checkCommentEmpty)}),500)},methods:{clearUserNotifications:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=JSON.parse(JSON.stringify(e.loggedinUser)),a=r.mentions.filter((function(t){return t.cardId!==e.card.id})),r.mentions=a,t.next=6,e.$store.dispatch({type:"updateUser",user:r});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("Had a problem clearing user notifications",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},filterCardLabels:function(){var e=this;if(this.card){if(!this.card.labelIds.length)return this.cardLabels=[];console.log("filterCardLabels",this.card.labelIds.length),this.cardLabels=[],this.card.labelIds.forEach((function(t){var r=e.currBoard.labels.find((function(e){return e.id==t}));r&&e.cardLabels.push(r)}))}},loadCard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"getCardById",cardId:e.cardId,groupId:e.groupId,boardId:e.boardId});case 3:e.card=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("Had problem loading card",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},saveCard:function(e){var t=arguments,r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.length>1&&void 0!==t[1]&&t[1],e=s?e:r.card,e){a.next=4;break}return a.abrupt("return");case 4:return a.prev=4,a.next=7,r.$store.dispatch({type:"saveCard",card:e,groupId:r.groupId,boardId:r.boardId});case 7:r.card=a.sent,console.log("AFTER SAVECARD",r.card),r.filterCardLabels(),r.socketUpdateBoard(),a.next=17;break;case 13:throw a.prev=13,a.t0=a["catch"](4),console.log("cannot save card",a.t0),a.t0;case 17:case"end":return a.stop()}}),a,null,[[4,13]])})))()},removeCard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},t.prev=1,a={txt:"deleted ".concat(e.card.title," from ").concat(e.groupName),card:{id:e.card.id,title:e.card.title}},t.next=5,e.$store.dispatch({type:"removeCard",cardId:e.cardId,groupId:e.groupId,boardId:e.boardId});case 5:return t.next=7,$.$emit("addActivity",a);case 7:return t.next=9,e.socketUpdateBoard();case 9:return t.next=11,e.closeCardDetails();case 11:r={txt:"Card was successfully removed",type:"success"},t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),r={txt:"Fail remove card, try again later",type:"error"};case 17:return t.prev=17,t.next=20,e.$store.dispatch({type:"showMsg",msg:r});case 20:return t.finish(17);case 21:case"end":return t.stop()}}),t,null,[[1,14,17,21]])})))()},socketUpdateBoard:function(){this.card&&(console.log("EMITTING SOCKET"),this.$emit("socketUpdateBoard"))},closeCardDetails:function(){this.$router.push("/b/".concat(this.boardId))},closeEditPopup:function(){this.isPopupShow=!1,this.currAction=null},setCurrAction:function(e,t){this.currAction=t,this.isPopupShow=!0},onUploadImg:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,lr(e);case 4:a=r.sent,t.card.attachments.push({url:a.url,creatAt:Date.now()}),s={txt:"added an attachment to ".concat(t.card.title),card:{id:t.card.id,title:t.card.title}},t.saveCard(),$.$emit("addActivity",s),r.next=15;break;case 11:throw r.prev=11,r.t0=r["catch"](0),console.log("cannot upload image",r.t0),r.t0;case 15:return r.prev=15,t.isLoading=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[0,11,15,18]])})))()},deleteImg:function(e){var t=this.card.attachments.findIndex((function(t){return t.url===e.url}));this.card.attachments.splice(t,1);var r={txt:"deleted an attachment from ".concat(this.card.title),card:{id:this.card.id,title:this.card.title}};this.saveCard(),$.$emit("addActivity",r)},openChanges:function(e){this.checkboxTitle="",this.currChecklist=e},removeChecklist:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a={},r.next=4,t.$store.dispatch({type:"removeChecklist",checklistId:e,card:t.card,groupId:t.groupId,boardId:t.boardId});case 4:a={txt:"Checklist was successfully removed",type:"success"},t.socketUpdateBoard(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),a={txt:"Fail to remove checklist, try again later",type:"error"};case 11:return r.prev=11,r.next=14,t.$store.dispatch({type:"showMsg",msg:a});case 14:return r.finish(11);case 15:case"end":return r.stop()}}),r,null,[[0,8,11,15]])})))()},deleteCheckbox:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.$store.dispatch({type:"removeCheckbox",checkboxId:e,checklistId:t,card:r.card,groupId:r.groupId,boardId:r.boardId});case 3:r.socketUpdateBoard(),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),console.log("ERROR: cannot remove checkbox",e,",",a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},addCheckbox:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.$store.dispatch({type:"addCheckbox",title:e.checkboxTitle,checklistId:e.currChecklist,card:e.card,groupId:e.groupId,boardId:e.boardId}),e.closeChanges(),e.socketUpdateBoard()}catch(r){console.log("ERROR: cannot add checkbox")}case 1:case"end":return t.stop()}}),t)})))()},closeChanges:function(){this.checkboxTitle="",this.currChecklist=null},saveCheckbox:function(e){this.saveCard(),this.socketUpdateBoard(),e.target.blur()},openDate:function(e){"P"===e.target.tagName&&this.setCurrAction(e,this.actions[4])},removeDate:function(){this.card.dueDate={},this.saveCard()},addComment:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"addComment",commentTxt:e.commentTxt,card:e.card,groupId:e.groupId,boardId:e.boardId});case 3:e.isMention(),r={txt:"added a comment on ".concat(e.card.title),card:{id:e.card.id,title:e.card.title}},$.$emit("addActivity",r),e.socketUpdateBoard(),e.commentTxt="",e.iscommentOpen=!1,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log("Had a problem adding comment",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},isMention:function(){if(this.commentTxt.includes("@")){var e=this.commentTxt,t=e.split("@")[1].split(" ")[0];this.$store.dispatch({type:"addMention",username:t,cardId:this.card.id})}},checkCommentEmpty:function(){this.commentTxt?this.iscommentOpen=!0:this.iscommentOpen=!1,this.socketUpdateBoard()},isYourComment:function(e){return e.byMember._id===this.$store.getters.loggedinUser._id},removeComment:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch({type:"removeComment",commentId:e,card:t.card,groupId:t.groupId,boardId:t.boardId});case 2:return a=r.sent,console.log("card",a),s={txt:"deleted a comment from ".concat(t.card.title),card:{id:t.card.id,title:t.card.title}},t.card=a,r.next=8,$.$emit("addActivity",s);case 8:t.socketUpdateBoard();case 9:case"end":return r.stop()}}),r)})))()},setShowComments:function(){"Show Details"===this.titleActivityBtn?this.titleActivityBtn="Hide Details":this.titleActivityBtn="Show Details"},getPercent:function(e){var t=e.todos.length;if(0===t)return 0;var r=e.todos.reduce((function(e,t){return t.isDone&&e++,e}),0);return Math.floor(100*r/t)},addUserToCard:function(){var e=this.$store.getters.getMyMiniUser;this.card.members.push(e),this.saveCard();var t={txt:"joined ".concat(this.card.title),card:{id:this.card.id,title:this.card.title}};$.$emit("addActivity",t)},copyCard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={},t.next=4,e.$store.dispatch({type:"copyCard",card:e.card,groupId:e.groupId,boardId:e.boardId});case 4:a={txt:"copied ".concat(e.card.title," from ").concat(e.card.title," in list ").concat(e.groupName),card:{id:e.card.id,title:e.card.title}},$.$emit("addActivity",a),e.socketUpdateBoard(),r={txt:"Card was successfully copied",type:"success"},t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),r={txt:"Fail copied card, try again later",type:"error"};case 13:return t.prev=13,t.next=16,e.$store.dispatch({type:"showMsg",msg:r});case 16:return t.finish(13);case 17:case"end":return t.stop()}}),t,null,[[0,10,13,17]])})))()},addCheckboxActivityAndSave:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={},a=e.isDone?{txt:"completed ".concat(e.title," on card ").concat(t.card.title)}:{txt:"removed completed mark from ".concat(e.title," on card ").concat(t.card.title)},a.card={id:t.card.id,title:t.card.title},r.next=5,t.saveCard();case 5:$.$emit("addActivity",a);case 6:case"end":return r.stop()}}),r)})))()},markDueDateActivity:function(){var e={};e=this.card.dueDate.isDone?{txt:"marked the due date on ".concat(this.card.title," complete")}:{txt:"marked the due date on ".concat(this.card.title," incomplete")},e.card={id:this.card.id,title:this.card.title},$.$emit("addActivity",e)}},computed:{currBoard:function(){return this.$store.getters.currBoard},classToComment:function(){return{isOpen:this.iscommentOpen}},getLoggedinUser:function(){return this.$store.getters.loggedinUser},isCoverClass:function(){return{"is-cover":this.card.cover.color}},userNotInclude:function(){var e=this.$store.getters.loggedinUser,t=this.card.members.findIndex((function(t){return t._id===e._id}));return-1===t},userIsMemberShip:function(){var e=this.$store.getters.loggedinUser;return this.currBoard.members.some((function(t){return t._id===e._id}))},activitiesToShow:function(){var e=this,t=this.$store.getters.currBoard.activities.filter((function(t){return!!t.card&&t.card.id===e.card.id}));return JSON.parse(JSON.stringify(t)).reverse()}}},vr=fr,br=Object(k["a"])(vr,ir,cr,!1,null,null,null),Cr=br.exports,kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-signup"},[a("img",{staticClass:"wave",attrs:{src:r("46db"),alt:""}}),a("section",{staticClass:"header-waves"},[e._m(0),a("nav",{staticClass:"homepage-nav"},[a("router-link",{staticClass:"login",attrs:{to:"/"}},[e._v("Home")]),a("span",[e._v(" | ")]),a("router-link",{staticClass:"signup",attrs:{to:"/signup"}},[e._v("Sign up")])],1)]),a("div",{staticClass:"main-container login-container"},[a("p",[e._v("Log in to Trio")]),a("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text",name:"username",placeholder:"Enter username",required:""},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",placeholder:"Enter password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("button",{staticClass:"login"},[e._v("Log in")])]),a("router-link",{staticClass:"btn-signup",attrs:{to:"/signup"}},[e._v("Sign up for an account ")])],1)])},yr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logo"},[r("span",{staticClass:"material-icons-outlined logo-icon"},[e._v("space_dashboard")]),e._v("Trio ")])}],wr={data:function(){return{user:{username:null,password:null}}},methods:{login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"login",userCred:e.user});case 3:r=t.sent,r&&e.$router.push("/b"),t.next=13;break;case 7:return t.prev=7,t.t0=t["catch"](0),console.log("ERROR: cannot login. User and/or password are incorrect",t.t0),a={txt:"Invalid username or password",type:"error"},t.next=13,e.$store.dispatch({type:"showMsg",msg:a});case 13:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},_r=wr,xr=Object(k["a"])(_r,kr,yr,!1,null,null,null),Br=xr.exports,Er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-signup"},[a("img",{staticClass:"wave",attrs:{src:r("46db"),alt:""}}),a("section",{staticClass:"header-waves"},[e._m(0),a("nav",{staticClass:"homepage-nav"},[a("router-link",{staticClass:"login",attrs:{to:"/"}},[e._v("Home")]),a("span",[e._v(" | ")]),a("router-link",{staticClass:"signup",attrs:{to:"/login"}},[e._v("Log in")])],1)]),a("div",{staticClass:"main-container"},[a("p",[e._v("Sign up for your account")]),a("form",{on:{submit:function(t){return t.preventDefault(),e.signup.apply(null,arguments)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.fullname,expression:"user.fullname"}],attrs:{type:"text",name:"fullname",placeholder:"Enter full name",autocomplete:"off",required:""},domProps:{value:e.user.fullname},on:{input:function(t){t.target.composing||e.$set(e.user,"fullname",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text",name:"username",placeholder:"Enter username",autocomplete:"off",required:""},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",name:"email",placeholder:"Enter email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",placeholder:"Enter password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("div",{staticClass:"avatar"},[e.isLoading?a("div",[e._v("Loading image...")]):a("div",{staticClass:"avatar-img"},[e.isLoaded?a("img",{staticClass:"avatar-img-display avatar",attrs:{src:e.user.imgUrl}}):a("label",{attrs:{for:"select-avatar"}},[e._v("Avatar image: "),a("span",{staticClass:"material-icons-outlined"},[e._v("cloud_upload")]),a("input",{attrs:{id:"select-avatar",type:"file",accept:"image/png, image/gif, image/jpeg",hidden:""},on:{change:e.onUploadImg}})])])]),a("button",[e._v("Sign up")])]),a("router-link",{staticClass:"btn-signup",attrs:{to:"/login"}},[e._v("Already have an account? Log in")])],1)])},Ir=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logo"},[r("span",{staticClass:"material-icons-outlined logo-icon"},[e._v("space_dashboard")]),e._v("Trio ")])}],Or={data:function(){return{user:{fullname:null,username:null,email:null,password:null,imgUrl:"",mentions:[]},isLoading:!1,isLoaded:!1}},methods:{onUploadImg:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,lr(e);case 4:a=r.sent,t.user.imgUrl=a.url,t.isLoaded=!0,r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](0),console.log("cannot upload image",r.t0),r.t0;case 13:return r.prev=13,t.isLoading=!1,r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[0,9,13,16]])})))()},signup:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"signup",userCred:e.user});case 2:e.$router.push("/b/".concat(e.$store.getters.boards[0]._id));case 3:case"end":return t.stop()}}),t)})))()}}},Tr=Or,jr=Object(k["a"])(Tr,Er,Ir,!1,null,null,null),Rr=jr.exports;a["default"].use(g["a"]);var Dr=[{path:"/",name:"Home",component:w},{path:"/b",name:"Boards",component:or},{path:"/b/:boardId",name:"Board",component:er,children:[{path:"g/:groupId/c/:cardId",name:"CardDetails",component:Cr}]},{path:"/login",name:"Login",component:Br},{path:"/signup",name:"Signup",component:Rr}],$r=new g["a"]({mode:"history",base:"/",routes:Dr}),Mr=$r,Ur="/api/",Lr=h.a.create({withCredentials:!0}),Sr={get:function(e,t){return Ar(e,"GET",t)},post:function(e,t){return Ar(e,"POST",t)},put:function(e,t){return Ar(e,"PUT",t)},delete:function(e,t){return Ar(e,"DELETE",t)}};function Ar(e){return Pr.apply(this,arguments)}function Pr(){return Pr=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:"GET",a=n.length>2&&void 0!==n[2]?n[2]:null,e.prev=2,e.next=5,Lr({url:"".concat(Ur).concat(t),method:r,data:a,params:"GET"===r?a:null});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e["catch"](2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(void 0).push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),Pr.apply(this,arguments)}var Nr="loggedinUser",Fr={login:Wr,logout:Zr,signup:Yr,getUsers:Gr,getById:qr,getLoggedinUser:Xr,signupAsGuest:ra,getMiniUser:sa,createDemoUsers:oa,updateUser:ea};function Gr(){return Hr.apply(this,arguments)}function Hr(){return Hr=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sr.get("user");case 3:if(t=e.sent,t.length){e.next=7;break}return e.next=7,oa();case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e["catch"](0),console.log("userService: Error in getUsers",e.t0),e.t0;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[0,9]])}))),Hr.apply(this,arguments)}function qr(e){return zr.apply(this,arguments)}function zr(){return zr=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sr.get("user/".concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("userService: Error in getById user",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),zr.apply(this,arguments)}function Wr(e){return Jr.apply(this,arguments)}function Jr(){return Jr=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sr.post("auth/login",t);case 3:if(r=e.sent,!r){e.next=6;break}return e.abrupt("return",Qr(r));case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](0),console.log("userService: Error in login user",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),Jr.apply(this,arguments)}function Yr(e){return Kr.apply(this,arguments)}function Kr(){return Kr=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sr.post("auth/signup",t);case 3:return r=e.sent,e.abrupt("return",Qr(r));case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("userService: Error in signup user",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),Kr.apply(this,arguments)}function Zr(){return Vr.apply(this,arguments)}function Vr(){return Vr=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return sessionStorage.removeItem(Nr),e.prev=1,e.next=4,Sr.post("auth/logout");case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e["catch"](1),console.log("userService: Error in logout",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),Vr.apply(this,arguments)}function Qr(e){return sessionStorage.setItem(Nr,JSON.stringify(e)),e}function Xr(){return JSON.parse(sessionStorage.getItem(Nr)||"null")}function ea(e){return ta.apply(this,arguments)}function ta(){return ta=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("USER",t),e.next=4,Sr.put("user/".concat(t._id),t);case 4:return r=e.sent,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e["catch"](0),console.log("Had a problem adding mention",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),ta.apply(this,arguments)}function ra(){return aa.apply(this,arguments)}function aa(){return aa=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={fullname:"Guest",username:"Guest"+Date.now()%1e4,password:"Guest",imgUrl:"",mentions:[]},e.abrupt("return",Yr(t));case 2:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function sa(e){return na.apply(this,arguments)}function na(){return na=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qr(t);case 3:return r=e.sent,e.abrupt("return",{_id:r._id,username:r.username,fullname:r.fullname,imgUrl:r.imgUrl});case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("userService: Error in getById user",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),na.apply(this,arguments)}function oa(){return ia.apply(this,arguments)}function ia(){return ia=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=[{fullname:"Yael Hazan",username:"yael",email:"yael@aa.com",password:"123123",imgUrl:"https://res.cloudinary.com/or21321/image/upload/v1626387050/vnodxsvuzaeapjkgxw9g.jpg",mentions:[]},{fullname:"Dekel Livyani",username:"dekel",email:"dekel@gmail.com",password:"123123",imgUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRg2DU9OQ6q9A4Alh_MYjoLzo6awn87MICqq6KenfafYqwT_JnQi3xmnQfRAQFMqFH2TFMjhS6V&usqp=CAc",mentions:[]},{fullname:"Or Hadar",username:"or",email:null,password:"123123",imgUrl:"http://res.cloudinary.com/or21321/image/upload/v1626387480/y5ox9qoe0xvuhmsyultn.jpg",mentions:[]},{fullname:"Eden Aran",username:"eden",email:"eden@gmail.com",password:"123123",imgUrl:"http://res.cloudinary.com/or21321/image/upload/v1626390579/xedxhssgnjtf68kd4gme.jpg",mentions:[]}],e.next=4,Sr.post("auth/signup",t[0]);case 4:return e.next=6,Sr.post("auth/signup",t[1]);case 6:return e.next=8,Sr.post("auth/signup",t[2]);case 8:return e.next=10,Sr.post("auth/signup",t[3]);case 10:return e.next=12,Sr.get("user");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log("err",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),ia.apply(this,arguments)}var ca={query:la,getById:ua,remove:ma,removeGroup:Ca,removeCard:Ba,save:ga,saveGroup:ya,saveCard:Ia,getEmptyBoard:Ha,getEmptyGroup:qa,getEmptyCard:za,addActivity:va,getCardById:Ta,getGroupById:_a,addCheckbox:Ra,removeChecklist:$a,removeCheckbox:Ua,addComment:Sa,removeComment:Pa,copyCard:Fa};function la(){return da.apply(this,arguments)}function da(){return da=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sr.get("board");case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e["catch"](0),console.log("query had an error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),da.apply(this,arguments)}function ua(e){return pa.apply(this,arguments)}function pa(){return pa=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sr.get("board/".concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e["catch"](0),console.log("Error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),pa.apply(this,arguments)}function ma(e){return ha.apply(this,arguments)}function ha(){return ha=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",Sr.delete("board/".concat(t)));case 4:e.prev=4,e.t0=e["catch"](0),console.log("Error:",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])}))),ha.apply(this,arguments)}function ga(e){return fa.apply(this,arguments)}function fa(){return fa=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t._id){e.next=8;break}return e.next=4,Sr.put("board",t);case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.next=10,Sr.post("board",t);case 10:return a=e.sent,e.abrupt("return",a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log("Error:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),fa.apply(this,arguments)}function va(e,t){return ba.apply(this,arguments)}function ba(){return ba=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("recevied activity to board service:",t),t.id=Oe.makeId(),t.createdAt=Date.now(),e.next=6,Sr.post("board/".concat(r,"/activity"),{boardId:r,activity:t});case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e["catch"](0),console.log("Error:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),ba.apply(this,arguments)}function Ca(e,t){return ka.apply(this,arguments)}function ka(){return ka=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ua(r);case 3:return a=e.sent,s=a.groups.findIndex((function(e){return e.id===t})),a.groups.splice(s,1),e.next=8,ga(a);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e["catch"](0),console.log("Error:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ka.apply(this,arguments)}function ya(e,t){return wa.apply(this,arguments)}function wa(){return wa=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("save",t,"in board:",r),e.next=4,ua(r);case 4:return a=e.sent,t.id?(s=a.groups.findIndex((function(e){return e.id===t.id})),a.groups.splice(s,1,t)):(t.id=Oe.makeId(),a.groups.push(t)),e.next=8,ga(a);case 8:return e.abrupt("return",t);case 11:e.prev=11,e.t0=e["catch"](0),console.log("Error:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),wa.apply(this,arguments)}function _a(e,t){return xa.apply(this,arguments)}function xa(){return xa=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ua(r);case 3:return a=e.sent,e.abrupt("return",a.groups.find((function(e){return e.id===t})));case 7:e.prev=7,e.t0=e["catch"](0),console.log("Error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),xa.apply(this,arguments)}function Ba(e,t,r){return Ea.apply(this,arguments)}function Ea(){return Ea=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a){var s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ua(a);case 3:return s=e.sent,n=s.groups.findIndex((function(e){return e.id===r})),o=s.groups[n].cards.findIndex((function(e){return e.id===t})),s.groups[n].cards.splice(o,1),e.next=9,ga(s);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e["catch"](0),console.log("Error:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Ea.apply(this,arguments)}function Ia(e,t,r){return Oa.apply(this,arguments)}function Oa(){return Oa=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a){var s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ua(a);case 3:return s=e.sent,n=s.groups.findIndex((function(e){return e.id===r})),t.id?(o=s.groups[n].cards.findIndex((function(e){return e.id===t.id})),console.log("board.groups[groupIdx].cards",s.groups[n].cards),s.groups[n].cards.splice(o,1,t)):(t.id=Oe.makeId(),t.createdAt=Date.now(),s.groups[n].cards.push(t)),e.next=8,ga(s);case 8:return e.abrupt("return",t);case 11:e.prev=11,e.t0=e["catch"](0),console.log("Error:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Oa.apply(this,arguments)}function Ta(e,t,r){return ja.apply(this,arguments)}function ja(){return ja=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a){var s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ua(a);case 3:return s=e.sent,n=s.groups.find((function(e){return e.id===r})),o=n.cards.find((function(e){return e.id===t})),console.log("cardddd",o),e.abrupt("return",o);case 10:e.prev=10,e.t0=e["catch"](0),console.log("Error:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),ja.apply(this,arguments)}function Ra(e,t,r,a,s){return Da.apply(this,arguments)}function Da(){return Da=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a,s,n){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o={id:Oe.makeId(),title:t,isDone:!1},i=a.checklists.findIndex((function(e){return e.id===r})),a.checklists[i].todos.push(o),e.next=6,Ia(a,s,n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e["catch"](0),console.log("Error:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),Da.apply(this,arguments)}function $a(e,t,r,a){return Ma.apply(this,arguments)}function Ma(){return Ma=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a,s){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=r.checklists.findIndex((function(e){return e.id===t})),r.checklists.splice(n,1),e.next=5,Ia(r,a,s);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e["catch"](0),console.log("Error:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),Ma.apply(this,arguments)}function Ua(e,t,r,a,s){return La.apply(this,arguments)}function La(){return La=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a,s,n){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o=a.checklists.findIndex((function(e){return e.id===r})),i=a.checklists[o].todos.findIndex((function(e){return e.id===t})),a.checklists[o].todos.splice(i,1),e.next=6,Ia(a,s,n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e["catch"](0),console.log("Error:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),La.apply(this,arguments)}function Sa(e,t,r,a){return Aa.apply(this,arguments)}function Aa(){return Aa=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a,s){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Oe.makeId(),e.t1=t,e.t2=Date.now(),e.next=6,Fr.getMiniUser(Fr.getLoggedinUser()._id);case 6:return e.t3=e.sent,n={id:e.t0,txt:e.t1,createdAt:e.t2,byMember:e.t3},r.comments.unshift(n),e.next=11,Ia(r,a,s);case 11:return o=e.sent,console.log("savedCard",o),e.abrupt("return",n);case 16:e.prev=16,e.t4=e["catch"](0),console.log("Error:",e.t4);case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),Aa.apply(this,arguments)}function Pa(e,t,r,a){return Na.apply(this,arguments)}function Na(){return Na=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a,s){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=r.comments.findIndex((function(e){return e.id===t})),r.comments.splice(n,1),e.next=5,Ia(r,a,s);case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e["catch"](0),console.log("Error:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),Na.apply(this,arguments)}function Fa(e,t,r){return Ga.apply(this,arguments)}function Ga(){return Ga=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=JSON.parse(JSON.stringify(t)),delete s.id,e.next=5,Ia(s,r,a);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e["catch"](0),console.log("Error:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),Ga.apply(this,arguments)}function Ha(){return{title:"",isStarred:!1,style:{},labels:[{color:"#61bd4f",id:Oe.makeId(),title:""},{color:"#f2d600",id:Oe.makeId(),title:""},{color:"#ff9f1a",id:Oe.makeId(),title:""},{color:"#eb5a46",id:Oe.makeId(),title:""},{color:"#c377e0",id:Oe.makeId(),title:""},{color:"#0079bf",id:Oe.makeId(),title:""}],members:[],groups:[],activities:[]}}function qa(){return{title:"",cards:[],style:{}}}function za(){return{title:"",description:"",comments:[],checklists:[],members:[],labelIds:[],dueDate:{},byMember:{},cover:{color:"",type:""},attachments:[],style:{}}}var Wa={data:function(){return{board:ca.getEmptyBoard(),colors:[],imgs:["https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/u8lua-4AD76J88AJT-Full-Image_GalleryBackground-en-US-1585673473334._RI_.jpg","https://wallpaperaccess.com/full/1146927.jpg","https://wallpaperaccess.com/full/109672.jpg","https://wallpaperaccess.com/full/1378654.jpg","https://wallpaperaccess.com/full/2348657.jpg","https://images.wunderstock.com/Bodies-of-Water-Near-Mountain-At-Starry-Night_u9zZpYBztI57_1600.jpeg","https://images8.alphacoders.com/926/thumb-1920-926492.jpg","https://i.pinimg.com/originals/45/b3/c8/45b3c8edad36060ad7908ae64b10b87d.jpg","https://cdn.wallpapersafari.com/23/23/bq9Hw7.jpg"],selectImg:"https://wallpaperaccess.com/full/109672.jpg",selectColor:""}},created:function(){this.renderColors()},methods:{renderColors:function(){this.colors=[];for(var e=0;e<9;e++)this.colors.push(Oe.getRandomColor())},closeCompose:function(e){"board-compose-container"===e.target.className&&this.$emit("closeCompose")},createBoard:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.board.style={"background-color":e.selectColor,"background-image":"url(".concat(e.selectImg,")")},e.board.createdAt=Date.now(),t.prev=2,r=e.$store.getters.loggedinUser._id,t.next=6,e.$store.dispatch({type:"getMiniUser",userId:r});case 6:a=t.sent,e.board.createdBy=a,e.board.members=[a],e.$emit("addBoard",e.board),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),console.log("failed to get miniLoggedInUser",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()},close:function(){this.$emit("closeCompose")},setBcg:function(e){this.selectImg="",this.selectColor=e,this.board.style={"background-color":e}},setimg:function(e){this.selectColor="",this.selectImg=e,this.board.style={"background-image:":"url(".concat(e,")")}}},destroyed:function(){this.colors=[]}},Ja=Wa,Ya=Object(k["a"])(Ja,u,p,!1,null,null,null),Ka=Ya.exports,Za=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"board-list"},[r("header",{staticClass:"header-list"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchBoard,expression:"searchBoard"}],ref:"searchBoard",staticClass:"input-search-boards",attrs:{type:"text",placeholder:"Find boards by name..."},domProps:{value:e.searchBoard},on:{input:[function(t){t.target.composing||(e.searchBoard=t.target.value)},e.setFilter]}}),r("span",{staticClass:"close material-icons-outlined",on:{click:e.closeBoardList}},[e._v("close")])]),r("main",[e.searchBoard?r("section",{staticClass:"search-list"},[r("div",{staticClass:"main-list"},e._l(e.boardsAfterFilter,(function(t){return r("article",{key:t._id,staticClass:"board-preview",on:{click:function(r){return e.openBoard(t)}}},[r("div",{staticClass:"bgc",style:{backgroundImage:t.style["background-image"],backgroundColor:t.style["background-color"]}}),r("div",{staticClass:"bgc-square",style:{backgroundImage:t.style["background-image"],backgroundColor:t.style["background-color"]}}),r("span",[e._v(" "+e._s(t.title)+" ")]),r("span",{staticClass:"material-icons-round star",class:{selected:t.isStarred},on:{click:function(r){return r.stopPropagation(),e.toggleStar(t)}}},[e._v("star_outline")])])})),0)]):r("section",{staticClass:"regular-listes"},[e.boardsStarred.length?r("div",{staticClass:"list-starred"},[r("h2",{staticClass:"title"},[r("span",{staticClass:"material-icons-round star-title"},[e._v("star_outline")]),e._v("STARRED BOARDS "),e.listClose.includes("boardsStarred")?r("span",{staticClass:"material-icons-outlined close-list",on:{click:function(t){return e.toggleListClose("boardsStarred")}}},[e._v("add")]):r("span",{staticClass:"material-icons-outlined close-list",on:{click:function(t){return e.toggleListClose("boardsStarred")}}},[e._v("remove")])]),e.listClose.includes("boardsStarred")?e._e():r("div",{staticClass:"main-list"},e._l(e.boardsStarred,(function(t){return r("article",{key:t._id,staticClass:"board-preview",on:{click:function(r){return e.openBoard(t)}}},[r("div",{staticClass:"bgc",style:{backgroundImage:t.style["background-image"],backgroundColor:t.style["background-color"]}}),r("div",{staticClass:"bgc-square",style:{backgroundImage:t.style["background-image"],backgroundColor:t.style["background-color"]}}),r("span",[e._v(" "+e._s(t.title)+" ")]),r("span",{staticClass:"material-icons-round star",class:{selected:t.isStarred},on:{click:function(r){return r.stopPropagation(),e.toggleStar(t)}}},[e._v("star_outline")])])})),0)]):e._e(),e.recentBoards.length?r("div",{staticClass:"list-recent"},[r("h2",{staticClass:"title"},[r("span",{staticClass:"material-icons-outlined"},[e._v("history")]),e._v("RECENT BOARDS "),e.listClose.includes("recentBoards")?r("span",{staticClass:"material-icons-outlined close-list",on:{click:function(t){return e.toggleListClose("recentBoards")}}},[e._v("add")]):r("span",{staticClass:"material-icons-outlined close-list",on:{click:function(t){return e.toggleListClose("recentBoards")}}},[e._v("remove")])]),e.listClose.includes("recentBoards")?e._e():r("div",{staticClass:"main-list"},e._l(e.recentBoards,(function(t){return r("article",{key:t._id,staticClass:"board-preview",on:{click:function(r){return e.openBoard(t)}}},[r("div",{staticClass:"bgc",style:{backgroundImage:t.style["background-image"],backgroundColor:t.style["background-color"]}}),r("div",{staticClass:"bgc-square",style:{backgroundImage:t.style["background-image"],backgroundColor:t.style["background-color"]}}),r("span",[e._v(" "+e._s(t.title)+" ")]),r("span",{staticClass:"material-icons-round star",class:{selected:t.isStarred},on:{click:function(r){return r.stopPropagation(),e.toggleStar(t)}}},[e._v("star_outline")])])})),0)]):e._e(),r("div",{staticClass:"list-all"},[r("h2",{staticClass:"title"},[r("span",{staticClass:"material-icons-outlined"},[e._v("format_list_bulleted")]),e._v("ALL BOARDS "),e.listClose.includes("boards")?r("span",{staticClass:"material-icons-outlined close-list",on:{click:function(t){return e.toggleListClose("boards")}}},[e._v("add")]):r("span",{staticClass:"material-icons-outlined close-list",on:{click:function(t){return e.toggleListClose("boards")}}},[e._v("remove")])]),e.listClose.includes("boards")?e._e():r("div",{staticClass:"main-list"},e._l(e.boards,(function(t){return r("article",{key:t._id,staticClass:"board-preview",on:{click:function(r){return e.openBoard(t)}}},[r("div",{staticClass:"bgc",style:{backgroundImage:t.style["background-image"],backgroundColor:t.style["background-color"]}}),r("div",{staticClass:"bgc-square",style:{backgroundImage:t.style["background-image"],backgroundColor:t.style["background-color"]}}),r("span",[e._v(" "+e._s(t.title)+" ")]),r("span",{staticClass:"material-icons-round star",class:{selected:t.isStarred},on:{click:function(r){return r.stopPropagation(),e.toggleStar(t)}}},[e._v("star_outline")])])})),0)])])])])},Va=[],Qa={props:{boards:{type:Array,required:!0}},data:function(){return{recentBoards:null,listClose:[],searchBoard:""}},created:function(){this.$store.getters.currBoard&&this.$store.commit({type:"addBoardToRecentBoards",board:this.$store.getters.currBoard}),this.recentBoards=this.$store.getters.recentBoards},mounted:function(){this.$refs.searchBoard.focus()},methods:{closeBoardList:function(){this.$emit("closeBoardList")},openBoard:function(e){this.$store.commit({type:"addBoardToRecentBoards",board:e}),this.$store.getters.currBoard&&e._id===this.$store.getters.currBoard._id||(this.$emit("setBackground",e.style),this.$store.commit({type:"setCurrBoard",board:e}),this.$router.push("/b/".concat(e._id))),this.closeBoardList()},toggleStar:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.isStarred=!e.isStarred,r.next=4,t.$store.dispatch({type:"saveBoard",board:e});case 4:return a=t.$route.params.boardId,r.next=7,t.$store.dispatch({type:"getBoardById",boardId:a});case 7:s=r.sent,t.$store.commit({type:"setCurrBoard",board:s}),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log("Error cannot toggle star",r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},toggleListClose:function(e){var t=this.listClose.findIndex((function(t){return t===e}));-1===t?this.listClose.push(e):this.listClose.splice(t,1)},setFilter:function(){this.$store.commit({type:"setFilterBy",filterBy:{txt:this.searchBoard}})}},computed:{boardsStarred:function(){return this.boards.filter((function(e){return e.isStarred}))},boardsAfterFilter:function(){return this.$store.getters.boardsToShow}}},Xa=Qa,es=Object(k["a"])(Xa,Za,Va,!1,null,null,null),ts=es.exports,rs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"user-menu-popup"},[r("div",{staticClass:"card-edit-header"},[r("span",[e._v("Account")]),r("span",{staticClass:"close-popup-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("X")])]),r("div",{staticClass:"card-edit-main popup-layout-1"},[r("div",{staticClass:"account-info"},[r("avatar",{attrs:{size:40,username:e.user.fullname,src:e.user.imgUrl,backgroundColor:"#DFE1E6",color:"#172b4d"}}),r("div",{staticClass:"account-details"},[r("span",[e._v(e._s(e.user.fullname))]),r("span",{staticClass:"username"},[e._v(" ( "+e._s(e.user.username)+" )")])])],1),r("div",{staticClass:"logout",on:{click:e.logout}},[e._v("Log out")])])])},as=[],ss={props:{user:{type:Object,required:!0}},data:function(){return{cardToEdit:null}},methods:{close:function(){this.$emit("close")},logout:function(){this.$emit("logout")}},components:{avatar:d.a}},ns=ss,os=Object(k["a"])(ns,rs,as,!1,null,null,null),is=os.exports,cs={data:function(){return{isBoardComposeOn:!1,isBoardListOpen:!1,user:null,isUserMenuOpen:!1}},components:{avatar:d.a,boardCompose:Ka,boardList:ts,userMenu:is},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user=e.$store.getters.loggedinUser,e.user||!e.$route.path.includes("b/")){t.next=5;break}return t.next=4,e.$store.dispatch({type:"signupAsGuest"});case 4:e.user=e.$store.getters.loggedinUser;case 5:if(e.$store.getters.watchedUser){t.next=8;break}return t.next=8,e.$store.dispatch({type:"loadAndWatchUser",userId:e.user._id});case 8:case"end":return t.stop()}}),t)})))()},methods:{toggleBoardCompose:function(){this.isBoardComposeOn=!this.isBoardComposeOn},toggleBoardList:function(){this.isBoardListOpen=!this.isBoardListOpen},hideBoardList:function(){this.isBoardListOpen=!1},hideUserMenu:function(){this.isUserMenuOpen=!1},addBoard:function(e){this.$emit("addBoard",e),this.isBoardComposeOn=!1},setBackground:function(e){this.$emit("setBackground",e)},logout:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"logout"});case 2:r={"background-color":"whitesmoke"},e.setBackground(r),e.$router.push("/");case 5:case"end":return t.stop()}}),t)})))()},goToBoardsPage:function(){var e={"background-color":"whitesmoke"};this.setBackground(e),"/b"!==this.$route.path&&this.$router.push("/b"),this.$store.commit({type:"setCurrBoard",board:null})},goToHomePage:function(){var e={"background-color":"whitesmoke"};this.setBackground(e),this.$router.push("/"),this.$store.commit({type:"setCurrBoard",board:null})}},computed:{boards:function(){return this.$store.getters.boards},classBoardsPage:function(){return{"isBoards-page":"/b"===this.$route.path}}}},ls=cs,ds=Object(k["a"])(ls,i,c,!1,null,null,null),us=ds.exports,ps=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-msg",class:e.userMsg.type},[r("p",[e._v(e._s(e.userMsg.txt))]),"success"===e.userMsg.type?r("span",{staticClass:"material-icons-outlined"},[e._v("check")]):e._e(),"error"===e.userMsg.type?r("span",{staticClass:"material-icons-outlined"},[e._v("close")]):e._e()])},ms=[],hs={computed:{isOn:function(){return{"is-on":this.userMsg.txt}},msgType:function(){return{"is-on":this.userMsg.txt}},userMsg:function(){return this.$store.getters.userMsg}}},gs=hs,fs=Object(k["a"])(gs,ps,ms,!1,null,null,null),vs=fs.exports,bs={components:{appHeader:us,userMsg:vs},data:function(){return{isHome:!1,isHomePage:!1,backgroundColor:"",backgroundImg:"https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/u8lua-4AD76J88AJT-Full-Image_GalleryBackground-en-US-1585673473334._RI_.jpg",darkWindow:{editCard:!1,deleteBoard:!1}}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,Ht.setup(),t.next=4,e.$store.dispatch({type:"loadUsers"});case 4:return t.next=6,e.$store.dispatch({type:"loadBoards"});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("ERROR cannot load users or boards");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},watch:{"$route.path":{immediate:!0,handler:function(){var e=["/","/login","/signup"];e.includes(this.$route.path)?(this.isHome=!0,!this.$route.path.includes("/")||this.$route.path.includes("/login")||this.$route.path.includes("/signup")?this.isHomePage=!1:this.isHomePage=!0):this.isHome=!1}},watchedUser:{deep:!0,handler:function(){this.loggedinUser&&this.watchedUser&&this.loggedinUser._id===this.watchedUser._id&&this.updateUserMentions()}}},computed:{loggedinUser:function(){return this.$store.getters.loggedinUser},watchedUser:function(){return this.$store.getters.watchedUser},isDarkWindow:function(){return this.darkWindow.editCard||this.darkWindow.deleteBoard},isHomePageClass:function(){return{"is-home-page":this.isHomePage}}},methods:{updateUserMentions:function(){this.loggedinUser.mentions=this.watchedUser.mentions},addBoard:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"saveBoard",board:e});case 3:return a=r.sent,t.$store.commit({type:"setCurrBoard",board:a}),t.backgroundColor=e.style["background-color"],t.backgroundImg=e.style["background-image"],s={txt:"created this board"},r.next=10,t.$store.dispatch({type:"addActivity",activity:s});case 10:t.$router.push("/b/".concat(a._id)),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](0),console.log("ERROR cannot add board");case 16:case"end":return r.stop()}}),r,null,[[0,13]])})))()},setBackground:function(e){this.backgroundColor=e["background-color"],this.backgroundImg=e["background-image"]},setDarkWindow:function(e,t){this.darkWindow[e]=t},closeDarkWindow:function(){for(var e in this.darkWindow)this.darkWindow[e]=!1}}},Cs=bs,ks=Object(k["a"])(Cs,s,n,!1,null,null,null),ys=ks.exports,ws=r("2f62"),_s=(r("d3b7"),{state:{boards:[],currBoard:null,recentBoards:[],cardEdit:null,filterBy:{txt:"",labelIds:[],memberIds:[],timeLeft:0}},getters:{boards:function(e){var t=e.boards;return t},filterBy:function(e){var t=e.filterBy;return t},currBoard:function(e){var t=e.currBoard,r=e.filterBy;if(t){if(!r.txt&&!r.labelIds.length&&!r.memberIds.length&&!r.timeLeft)return t;var a=JSON.parse(JSON.stringify(t));return a.groups.forEach((function(e){if(r.txt){var t=new RegExp(r.txt,"i");e.cards=e.cards.filter((function(e){return t.test(e.title)}))}r.labelIds.length&&(e.cards=e.cards.filter((function(e){return e.labelIds.some((function(e){return r.labelIds.some((function(t){return t===e}))}))}))),r.memberIds.length&&(e.cards=e.cards.filter((function(e){return e.members.some((function(e){return r.memberIds.some((function(t){return t===e._id}))}))}))),console.log("filterBy.timeLeft",r.timeLeft),r.timeLeft&&(e.cards=e.cards.filter((function(e){return Date.parse(e.dueDate.time)-Date.now()<r.timeLeft&&Date.parse(e.dueDate.time)>Date.now()-864e5})))})),a}},recentBoards:function(e){var t=e.recentBoards;return t},cardEdit:function(e){var t=e.cardEdit;return t},boardsToShow:function(e){var t=new RegExp(e.filterBy.txt,"i");return e.boards.filter((function(e){return t.test(e.title)}))}},mutations:{setFilterBy:function(e,t){var r=t.filterBy;e.filterBy=r},setCurrBoard:function(e,t){var r=t.board;console.log("Yeafgf",r),Ht.on(Nt,(function(t){console.log("FROM STORE FROM SOCKET",t),e.currBoard=t})),console.log("board",r),e.currBoard=r},setCardEdit:function(e,t){var r=t.card;e.cardEdit=r},loadBoards:function(e,t){var r=t.boards;e.boards=r},addBoard:function(e,t){var r=t.savedBoard;e.boards.push(r)},updateBoard:function(e,t){var r=t.savedBoard,a=e.boards.findIndex((function(e){return e._id===r._id}));e.boards.splice(a,1,r),e.currBoard=r},removeBoard:function(e,t){var r=t.boardId,a=e.boards.findIndex((function(e){return e._id===r}));e.boards.splice(a,1)},addActivity:function(e,t){var r=t.activity;e.currBoard.activities.push(r)},addBoardToRecentBoards:function(e,t){var r=t.board;e.recentBoards.length>=5&&e.recentBoards.pop(),e.recentBoards=e.recentBoards.filter((function(e){return e._id!==r._id})),e.recentBoards.unshift(r)},removeBoardFromRecentBoards:function(e,t){var r=t.board;0!==e.recentBoards.length&&(e.recentBoards=e.recentBoards.filter((function(e){return e._id!==r._id})))},saveGroup:function(e,t){var r=t.isUpdate,a=t.group;if(r){var s=e.currBoard.groups.findIndex((function(e){return e.id===a.id}));e.currBoard.groups.splice(s,1,a)}else e.currBoard.groups.push(a)},saveCard:function(e,t){var r=t.isUpdate,a=t.card,s=t.groupId,n=e.currBoard.groups.findIndex((function(e){return e.id===s}));if(r){var o=e.currBoard.groups[n].cards.findIndex((function(e){return e.id===a.id}));e.currBoard.groups[n].cards.splice(o,1,a)}else e.currBoard.groups[n].cards.push(a)},addComment:function(e,t){var r=t.savedComment,a=t.card,s=t.groupId,n=e.currBoard.groups.findIndex((function(e){return e.id===s})),o=e.currBoard.groups[n].cards.findIndex((function(e){return e.id===a.id}));e.currBoard.groups[n].cards[o].comments.unshift(r)}},actions:{saveBoardAfterDrag:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.commit,s=e.state,n=t.board,o=s.filterBy,!(o.txt||o.labelIds.length||o.memberIds.length||o.timeLeft)){r.next=5;break}return r.abrupt("return",Promise.reject());case 5:return r.prev=5,console.log("from store",n),r.next=9,ca.save(n);case 9:return i=r.sent,a({type:"updateBoard",savedBoard:i}),r.abrupt("return",i);case 14:throw r.prev=14,r.t0=r["catch"](5),console.log("Had a problem updating board after drag - cant do that while filtering",r.t0),r.t0;case 18:case"end":return r.stop()}}),r,null,[[5,14]])})))()},loadBoards:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,ca.query();case 4:return a=t.sent,r({type:"loadBoards",boards:a}),t.abrupt("return",a);case 9:throw t.prev=9,t.t0=t["catch"](1),console.log("Cannot load boards",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},loadBoard:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.boardId,r.prev=2,r.next=5,ca.getById(s);case 5:return n=r.sent,a({type:"setCurrBoard",board:n}),r.abrupt("return",n);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("Cannot load board",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},saveBoard:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.board,n=s._id?"updateBoard":"addBoard",r.prev=3,console.log("from store",s),r.next=7,ca.save(s);case 7:return o=r.sent,a({type:n,savedBoard:o}),r.abrupt("return",o);case 12:throw r.prev=12,r.t0=r["catch"](3),console.log("Cannot save board ",s,",",r.t0),r.t0;case 16:case"end":return r.stop()}}),r,null,[[3,12]])})))()},removeBoard:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.boardId,r.prev=2,r.next=5,ca.remove(s);case 5:a({type:"removeBoard",boardId:s}),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](2),console.log("Cannot remove board ",s,",",r.t0),r.t0;case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))()},getBoardById:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.boardId,e.prev=1,e.next=4,ca.getById(r);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e["catch"](1),console.log("Cannot get board",r,",",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},addActivity:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.activity,r.prev=1,s=e.state.currBoard._id,r.next=5,ca.addActivity(a,s);case 5:n=r.sent,e.commit({type:"addActivity",activity:n,boardId:s}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](1),console.log("Cannot add activity ",a,",",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},saveGroup:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.group,n=t.boardId,o=!!s.id,r.prev=3,r.next=6,ca.saveGroup(s,n);case 6:i=r.sent,a({type:"saveGroup",isUpdate:o,group:i}),r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](3),console.log("Cannot save group",s,",",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[3,10]])})))()},removeGroup:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.groupId,n=t.boardId,r.prev=2,r.next=5,ca.removeGroup(s,n);case 5:o=r.sent,a({type:"updateBoard",savedBoard:o}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),console.log("Cannot remove group",s,",",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},getGroupById:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.groupId,a=t.boardId,e.prev=1,e.abrupt("return",ca.getGroupById(r,a));case 5:throw e.prev=5,e.t0=e["catch"](1),console.log("Cannot get group",r,",",e.t0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,5]])})))()},saveCard:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.card,n=t.groupId,o=t.boardId,i=!!s.id,r.prev=3,r.next=6,ca.saveCard(s,n,o);case 6:return c=r.sent,a({type:"saveCard",isUpdate:i,card:c,groupId:n}),r.abrupt("return",c);case 11:throw r.prev=11,r.t0=r["catch"](3),console.log("Cannot save card",s,",",r.t0),r.t0;case 15:case"end":return r.stop()}}),r,null,[[3,11]])})))()},removeCard:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.cardId,n=t.groupId,o=t.boardId,r.prev=2,r.next=5,ca.removeCard(s,n,o);case 5:i=r.sent,a({type:"updateBoard",savedBoard:i}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),console.log("Cannot remove card ",s,",",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},getCardById:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.cardId,a=t.groupId,s=t.boardId,e.prev=1,e.next=4,ca.getCardById(r,a,s);case 4:return n=e.sent,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](1),console.log("Cannot get card",r,",",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},addCheckbox:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.title,n=t.checklistId,o=t.card,i=t.groupId,c=t.boardId,r.prev=2,r.next=5,ca.addCheckbox(s,n,o,i,c);case 5:return l=r.sent,a({type:"saveCard",isUpdate:!0,card:l,groupId:i}),r.abrupt("return",l);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("Cannot add checkbox",s,",",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},removeChecklist:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.checklistId,a=t.card,s=t.groupId,n=t.boardId,e.prev=1,ca.removeChecklist(r,a,s,n),e.next=9;break;case 5:throw e.prev=5,e.t0=e["catch"](1),console.log("Cannot remove checklist",r,",",e.t0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,5]])})))()},removeCheckbox:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.checkboxId,a=t.checklistId,s=t.card,n=t.groupId,o=t.boardId,e.prev=1,ca.removeCheckbox(r,a,s,n,o),e.next=9;break;case 5:throw e.prev=5,e.t0=e["catch"](1),console.log("Cannot remove checklist",a,",",e.t0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,5]])})))()},addComment:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commentTxt,s=t.card,n=t.groupId,o=t.boardId,r.prev=1,r.next=4,ca.addComment(a,s,n,o);case 4:i=r.sent,e.commit({type:"addComment",savedComment:i,card:s,groupId:n}),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](1),console.log("Cannot add comment",a,",",r.t0),r.t0;case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},removeComment:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commentId,a=t.card,s=t.groupId,n=t.boardId,e.prev=1,e.next=4,ca.removeComment(r,a,s,n);case 4:return o=e.sent,console.log("savedCard after removeComment",o),e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e["catch"](1),console.log("Cannot remove board ",n,",",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},deleteImgFromCard:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commentId,a=t.card,s=t.groupId,n=t.boardId,e.prev=1,e.next=4,ca.removeComment(r,a,s,n);case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e["catch"](1),console.log("Cannot remove board ",n,",",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))()},copyCard:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.card,n=t.groupId,o=t.boardId,r.prev=2,r.next=5,ca.copyCard(s,n,o);case 5:return i=r.sent,a({type:"saveCard",isUpdate:!1,card:i,groupId:n}),r.abrupt("return",i);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("Cannot copy card ",s,",",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}}),xs={state:{loggedinUser:Fr.getLoggedinUser(),users:[],watchedUser:null},getters:{users:function(e){var t=e.users;return t},loggedinUser:function(e){var t=e.loggedinUser;return t},getMyMiniUser:function(e){var t=JSON.parse(JSON.stringify(e.loggedinUser));return delete t.email,delete t.mentions,t},watchedUser:function(e){var t=e.watchedUser;return t}},mutations:{setLoggedinUser:function(e,t){var r=t.user;e.loggedinUser=r},setUsers:function(e,t){var r=t.users;e.users=r},updateUser:function(e,t){var r=t.user,a=e.users.findIndex((function(e){return e._id===r._id}));e.users.splice(a,1,r)},setWatchedUser:function(e,t){var r=t.user;e.watchedUser=r}},actions:{loadAndWatchUser:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.userId,r.prev=2,r.next=5,Fr.getById(s);case 5:n=r.sent,a({type:"setWatchedUser",user:n}),Ht.emit(St,s),Ht.off(Ft),Ht.on(Ft,(function(e){a({type:"setWatchedUser",user:e})})),r.next=16;break;case 12:throw r.prev=12,r.t0=r["catch"](2),console.log("userStore: Error in loadAndWatchUser",r.t0),r.t0;case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))()},addMention:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.username,s=t.cardId,r.prev=1,r.next=4,e.dispatch({type:"loadUsers"});case 4:return n={cardId:s},o=e.state.users.findIndex((function(e){return e.username===a})),i=JSON.parse(JSON.stringify(e.state.users[o])),i.mentions.push(n),r.next=10,Fr.updateUser(i);case 10:c=r.sent,e.commit({type:"updateUser",user:c}),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](1),console.log("Had problem adding mention",r.t0);case 17:case"end":return r.stop()}}),r,null,[[1,14]])})))()},updateUser:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.user,r.prev=1,r.next=4,e.dispatch({type:"loadUsers"});case 4:return r.next=6,Fr.updateUser(a);case 6:s=r.sent,e.commit({type:"updateUser",user:s}),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](1),console.log("Had a problem updating user",r.t0);case 13:case"end":return r.stop()}}),r,null,[[1,10]])})))()},login:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=e.dispatch,n=t.userCred,r.prev=2,r.next=5,Fr.login(n);case 5:return o=r.sent,a({type:"setLoggedinUser",user:o}),r.next=9,s({type:"loadAndWatchUser",userId:o._id});case 9:return r.abrupt("return",o);case 12:throw r.prev=12,r.t0=r["catch"](2),console.log("userStore: Error in login",r.t0),r.t0;case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))()},signup:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.commit,s=t.userCred,r.prev=2,r.next=5,Fr.signup(s);case 5:return n=r.sent,a({type:"setLoggedinUser",user:n}),r.abrupt("return",n);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("userStore: Error in signup",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},logout:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Fr.logout();case 4:r({type:"setLoggedinUser",user:null}),t.next=11;break;case 7:throw t.prev=7,t.t0=t["catch"](1),console.log("userStore: Error in logout",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},loadUsers:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Fr.getUsers();case 4:a=t.sent,r({type:"setUsers",users:a}),t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](1),console.log("userStore: Error in loadUsers",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},signupAsGuest:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=e.dispatch,t.prev=1,t.next=4,Fr.signupAsGuest();case 4:return s=t.sent,t.next=7,a({type:"loadAndWatchUser",userId:s._id});case 7:r({type:"setLoggedinUser",user:s}),t.next=14;break;case 10:throw t.prev=10,t.t0=t["catch"](1),console.log("userStore: Error in signup As Guest",t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},getMiniUser:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.userId,e.prev=1,e.next=4,Fr.getMiniUser(r);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e["catch"](1),console.log("userStore: Error in getById user",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}};a["default"].use(ws["a"]);var Bs=new ws["a"].Store({strict:!0,state:{userMsg:{txt:"",type:""},timeoutId:null},getters:{userMsg:function(e){var t=e.userMsg;return t}},mutations:{setMsg:function(e,t){var r=t.msg;e.userMsg=r},setTimeoutId:function(e,t){var r=t.currTimeoutId;e.timeoutId=r}},actions:{showMsg:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,s,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.state,s=e.commit,n=t.msg;try{a.timeoutId&&clearTimeout(a.timeoutId),s({type:"setMsg",msg:n}),n={txt:"",type:""},o=setTimeout((function(){s({type:"setMsg",msg:n})}),2500),s({type:"setTimeoutId",currTimeoutId:o})}catch(i){console.log("ERROR: cannot get userMsg",i)}case 3:case"end":return r.stop()}}),r)})))()}},modules:{boardStore:_s,userStore:xs}}),Es=r("b8d7"),Is=r("5c96"),Os=r.n(Is);r("0fae"),r("3c61");a["default"].use(Os.a),a["default"].use(Es["a"]),a["default"].use(r("2ead")),a["default"].config.productionTip=!1,a["default"].directive("clickoutside",{inserted:function(e,t,r){e.clickOutsideEvent=function(a){e==a.target||e.contains(a.target)||r.context[t.expression](a)},document.body.addEventListener("click",e.clickOutsideEvent),document.body.addEventListener("touchstart",e.clickOutsideEvent)},unbind:function(e){document.body.removeEventListener("click",e.clickOutsideEvent),document.body.removeEventListener("touchstart",e.clickOutsideEvent)},stopProp:function(e){e.stopPropagation()}}),new a["default"]({router:Mr,store:Bs,render:function(e){return e(ys)}}).$mount(".app")},cf1c:function(e,t,r){e.exports=r.p+"img/loading.7c22e0cd.gif"}});
//# sourceMappingURL=app.64547957.js.map